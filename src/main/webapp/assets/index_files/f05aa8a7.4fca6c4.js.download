/*! For license information please see ../../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{1080:function(e,t,n){"use strict";var r=n(50),o=n(9),c=n(42),l=n(0),d=n(19);n(198);const h="analytics",f="firebase_id",m="origin",w=6e4,v="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_="https://www.googletagmanager.com/gtag/js",y=new c.b("@firebase/analytics"),E={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},I=new l.b("analytics","Analytics",E);function k(e){if(!e.startsWith(_)){const t=I.create("invalid-gtag-resource",{gtagURL:e});return y.warn(t.message),""}return e}function T(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function C(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:k}),script=document.createElement("script"),r=`${_}?l=${e}&id=${t}`;script.src=n?null==n?void 0:n.createScriptURL(r):r,script.async=!0,document.head.appendChild(script)}function A(e,t,n,r){return async function(o,...c){try{if("event"===o){const[r,o]=c;await async function(e,t,n,r,o){try{let c=[];if(o&&o.send_to){let e=o.send_to;Array.isArray(e)||(e=[e]);const r=await T(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),o=e&&t[e.appId];if(!o){c=[];break}c.push(o)}}0===c.length&&(c=Object.values(t)),await Promise.all(c),e("event",r,o||{})}catch(e){y.error(e)}}(e,t,n,r,o)}else if("config"===o){const[o,l]=c;await async function(e,t,n,r,o,c){const l=r[o];try{if(l)await t[l];else{const e=(await T(n)).find((e=>e.measurementId===o));e&&await t[e.appId]}}catch(e){y.error(e)}e("config",o,c)}(e,t,n,r,o,l)}else if("consent"===o){const[t]=c;e("consent","update",t)}else if("get"===o){const[t,n,r]=c;e("get",t,n,r)}else if("set"===o){const[t]=c;e("set",t)}else e(o,...c)}catch(e){y.error(e)}}}const D=30;const O=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function P(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function S(e,t=O,n){const{appId:r,apiKey:o,measurementId:c}=e.options;if(!r)throw I.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw I.create("no-api-key")}const l=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new j;return setTimeout((async()=>{d.abort()}),void 0!==n?n:w),N({appId:r,apiKey:o,measurementId:c},l,d,t)}async function N(e,{throttleEndTimeMillis:t,backoffCount:n},r,o=O){var c;const{appId:d,measurementId:h}=e;try{await function(e,t){return new Promise(((n,r)=>{const o=Math.max(t-Date.now(),0),c=setTimeout(n,o);e.addEventListener((()=>{clearTimeout(c),r(I.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(h)return y.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:d,measurementId:h};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:P(r)},c=v.replace("{app-id}",n),l=await fetch(c,o);if(200!==l.status&&304!==l.status){let e="";try{const n=await l.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw I.create("config-fetch-failed",{httpStatus:l.status,responseMessage:e})}return l.json()}(e);return o.deleteThrottleMetadata(d),t}catch(t){const f=t;if(!function(e){if(!(e instanceof l.c&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(f)){if(o.deleteThrottleMetadata(d),h)return y.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null==f?void 0:f.message}]`),{appId:d,measurementId:h};throw t}const m=503===Number(null===(c=null==f?void 0:f.customData)||void 0===c?void 0:c.httpStatus)?Object(l.l)(n,o.intervalMillis,D):Object(l.l)(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return o.setThrottleMetadata(d,w),y.debug(`Calling attemptFetch again in ${m} millis`),N(e,w,r,o)}}class j{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let R,M;function $(e){M=e}function L(e){R=e}async function x(e,t,n,r,o,c,d){var h;const w=S(e);w.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&y.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>y.error(e))),t.push(w);const v=async function(){if(!Object(l.G)())return y.warn(I.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Object(l.ab)()}catch(e){return y.warn(I.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[E,k]=await Promise.all([w,v]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(_)&&n.src.includes(e))return n;return null})(c)||C(c,E.measurementId),M&&(o("consent","default",M),$(void 0)),o("js",new Date);const T=null!==(h=null==d?void 0:d.config)&&void 0!==h?h:{};return T[m]="firebase",T.update=!0,null!=k&&(T[f]=k),o("config",E.measurementId,T),R&&(o("set",R),L(void 0)),E.measurementId}class F{constructor(e){this.app=e}_delete(){return delete B[this.app.options.appId],Promise.resolve()}}let B={},z=[];const H={};let U,K,V="dataLayer",W="gtag",G=!1;function X(e){if(G)throw I.create("already-initialized");e.dataLayerName&&(V=e.dataLayerName),e.gtagName&&(W=e.gtagName)}function Y(e,t,n){!function(){const e=[];if(Object(l.D)()&&e.push("This is a browser extension environment."),Object(l.e)()||e.push("Cookies are not available."),e.length>0){const details=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),t=I.create("invalid-analytics-context",{errorInfo:details});y.warn(t.message)}}();const r=e.options.appId;if(!r)throw I.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw I.create("no-api-key");y.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=B[r])throw I.create("already-exists",{id:r});if(!G){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(V);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,o){let c=function(...e){window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(c=window[o]),window[o]=A(c,e,t,n),{gtagCore:c,wrappedGtag:window[o]}}(B,z,H,V,W);K=e,U=t,G=!0}B[r]=x(e,z,H,t,U,V,n);return new F(e)}async function J(){if(Object(l.D)())return!1;if(!Object(l.e)())return!1;if(!Object(l.G)())return!1;try{return await Object(l.ab)()}catch(e){return!1}}function Q(e,t,n){e=Object(l.z)(e),async function(e,t,n,r){if(r&&r.global)return e("set",{screen_name:n}),Promise.resolve();e("config",await t,{update:!0,screen_name:n})}(K,B[e.app.options.appId],t,n).catch((e=>y.error(e)))}function Z(e,t,n){e=Object(l.z)(e),async function(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",await t,{update:!0,user_id:n})}(K,B[e.app.options.appId],t,n).catch((e=>y.error(e)))}function ee(e,t,n){e=Object(l.z)(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(K,B[e.app.options.appId],t,n).catch((e=>y.error(e)))}function te(e,t){e=Object(l.z)(e),async function(e,t){const n=await e;window[`ga-disable-${n}`]=!t}(B[e.app.options.appId],t).catch((e=>y.error(e)))}function ne(e,t,n,r){e=Object(l.z)(e),async function(e,t,n,r,o){if(o&&o.global)e("event",n,r);else{const o=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}}(K,B[e.app.options.appId],t,n,r).catch((e=>y.error(e)))}const re="@firebase/analytics",ae="0.10.0";Object(o._registerComponent)(new d.a(h,((e,{options:t})=>Y(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Object(o._registerComponent)(new d.a("analytics-internal",(function(e){try{const t=e.getProvider(h).getImmediate();return{logEvent:(e,n,r)=>ne(t,e,n,r)}}catch(e){throw I.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Object(o.registerVersion)(re,ae),Object(o.registerVersion)(re,ae,"esm2017");class ie{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,n){ne(this._delegate,e,t,n)}setCurrentScreen(e,t){Q(this._delegate,e,t)}setUserId(e,t){Z(this._delegate,e,t)}setUserProperties(e,t){ee(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){te(this._delegate,e)}}var oe;!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(oe||(oe={}));const se=e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new ie(t,n)};!function(){const e={Analytics:ie,settings:X,isSupported:J,EventName:oe};r.a.INTERNAL.registerComponent(new d.a("analytics-compat",se,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),r.a.registerVersion("@firebase/analytics-compat","0.2.6")},1081:function(e,t,n){"use strict";var r=n(50),o=n(19),c=n(9),l=n(0),d=n(42);const h=new Map,f={activated:!1,tokenObservers:[]},m={initialized:!1,enabled:!1};function w(e){return h.get(e)||Object.assign({},f)}function v(){return m}const _="https://content-firebaseappcheck.googleapis.com/v1",y="exchangeDebugToken",E={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class I{constructor(e,t,n,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((()=>{}))}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new l.a,await(t=this.getNextRun(e),new Promise((e=>{setTimeout(e,t)}))),this.pending.resolve(),await this.pending.promise,this.pending=new l.a,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch((()=>{}))}catch(e){this.retryPolicy(e)?this.process(!1).catch((()=>{})):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const k={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},T=new l.b("appCheck","AppCheck",k);function C(e=!1){var t;return e?null===(t=self.grecaptcha)||void 0===t?void 0:t.enterprise:self.grecaptcha}function A(e){if(!w(e).activated)throw T.create("use-before-activation",{appName:e.name})}function D(e){const t=Math.round(e/1e3),n=Math.floor(t/86400),r=Math.floor((t-3600*n*24)/3600),o=Math.floor((t-3600*n*24-3600*r)/60),c=t-3600*n*24-3600*r-60*o;let l="";return n&&(l+=O(n)+"d:"),r&&(l+=O(r)+"h:"),l+=O(o)+"m:"+O(c)+"s",l}function O(e){return 0===e?"00":e>=10?e.toString():"0"+e}async function P({url:e,body:body},t){const n={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&(n["X-Firebase-Client"]=e)}const o={method:"POST",body:JSON.stringify(body),headers:n};let c,l;try{c=await fetch(e,o)}catch(e){throw T.create("fetch-network-error",{originalErrorMessage:null==e?void 0:e.message})}if(200!==c.status)throw T.create("fetch-status-error",{httpStatus:c.status});try{l=await c.json()}catch(e){throw T.create("fetch-parse-error",{originalErrorMessage:null==e?void 0:e.message})}const d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw T.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const h=1e3*Number(d[1]),f=Date.now();return{token:l.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}}function S(e,t){const{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${_}/projects/${n}/apps/${r}:${y}?key=${o}`,body:{debug_token:t}}}const N="firebase-app-check-database",j=1,R="firebase-app-check-store",M="debug-token";let $=null;function L(){return $||($=new Promise(((e,t)=>{try{const n=indexedDB.open(N,j);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(T.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;if(0===e.oldVersion)t.createObjectStore(R,{keyPath:"compositeKey"})}}catch(e){t(T.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}})),$)}async function x(e,t){const n=(await L()).transaction(R,"readwrite"),r=n.objectStore(R).put({compositeKey:e,value:t});return new Promise(((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(T.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))}async function F(e){const t=(await L()).transaction(R,"readonly"),n=t.objectStore(R).get(e);return new Promise(((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(T.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}}))}function B(e){return`${e.options.appId}-${e.name}`}const z=new d.b("@firebase/app-check");async function H(e){if(Object(l.G)()){let t;try{t=await function(e){return F(B(e))}(e)}catch(e){z.warn(`Failed to read token from IndexedDB. Error: ${e}`)}return t}}function U(e,t){return Object(l.G)()?function(e,t){return x(B(e),t)}(e,t).catch((e=>{z.warn(`Failed to write token to IndexedDB. Error: ${e}`)})):Promise.resolve()}async function K(){let e;try{e=await F(M)}catch(e){}if(e)return e;{const e=Object(l.W)();return(t=e,x(M,t)).catch((e=>z.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`))),e}var t}function V(){return v().enabled}async function W(){const e=v();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}const G={error:"UNKNOWN_ERROR"};async function X(e,t=!1){const n=e.app;A(n);const r=w(n);let o,c=r.token;if(c&&!te(c)&&(r.token=void 0,c=void 0),!c){const e=await r.cachedTokenPromise;e&&(te(e)?c=e:await U(n,void 0))}if(!t&&c&&te(c))return{token:c.token};let l,d=!1;if(V()){r.exchangeTokenPromise||(r.exchangeTokenPromise=P(S(n,await W()),e.heartbeatServiceProvider).finally((()=>{r.exchangeTokenPromise=void 0})),d=!0);const t=await r.exchangeTokenPromise;return await U(n,t),r.token=t,{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally((()=>{r.exchangeTokenPromise=void 0})),d=!0),c=await w(n).exchangeTokenPromise}catch(e){"appCheck/throttled"===e.code?z.warn(e.message):z.error(e),o=e}return c?o?l=te(c)?{token:c.token,internalError:o}:ne(o):(l={token:c.token},r.token=c,await U(n,c)):l=ne(o),d&&ee(n,l),l}async function Y(e){const t=e.app;A(t);const{provider:n}=w(t);if(V()){const n=await W(),{token:r}=await P(S(t,n),e.heartbeatServiceProvider);return{token:r}}{const{token:e}=await n.getToken();return{token:e}}}function J(e,t,n,r){const{app:o}=e,c=w(o),l={next:n,error:r,type:t};if(c.tokenObservers=[...c.tokenObservers,l],c.token&&te(c.token)){const t=c.token;Promise.resolve().then((()=>{n({token:t.token}),Z(e)})).catch((()=>{}))}c.cachedTokenPromise.then((()=>Z(e)))}function Q(e,t){const n=w(e),r=n.tokenObservers.filter((e=>e.next!==t));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Z(e){const{app:t}=e,n=w(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new I((async()=>{let n;if(n=w(t).token?await X(e,!0):await X(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),(()=>!0),(()=>{const e=w(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;const n=e.token.expireTimeMillis-3e5;return t=Math.min(t,n),Math.max(0,t-Date.now())}return 0}),E.RETRIAL_MIN_WAIT,E.RETRIAL_MAX_WAIT)}(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function ee(e,t){const n=w(e).tokenObservers;for(const e of n)try{"EXTERNAL"===e.type&&null!=t.error?e.error(t.error):e.next(t)}catch(e){}}function te(e){return e.expireTimeMillis-Date.now()>0}function ne(e){return{token:(t=G,l.h.encodeString(JSON.stringify(t),!1)),error:e};var t}class re{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=w(this.app);for(const t of e)Q(this.app,t.next);return Promise.resolve()}}const ae="https://www.google.com/recaptcha/api.js",ie="https://www.google.com/recaptcha/enterprise.js";function oe(e,t){const n=new l.a;w(e).reCAPTCHAState={initialized:n};const r=le(e),o=C(!1);return o?ce(e,t,o,r,n):function(e){const script=document.createElement("script");script.src=ae,script.onload=e,document.head.appendChild(script)}((()=>{const o=C(!1);if(!o)throw new Error("no recaptcha");ce(e,t,o,r,n)})),n.promise}function se(e,t){const n=new l.a;w(e).reCAPTCHAState={initialized:n};const r=le(e),o=C(!0);return o?ce(e,t,o,r,n):function(e){const script=document.createElement("script");script.src=ie,script.onload=e,document.head.appendChild(script)}((()=>{const o=C(!0);if(!o)throw new Error("no recaptcha");ce(e,t,o,r,n)})),n.promise}function ce(e,t,n,r,o){n.ready((()=>{!function(e,t,n,r){const o=n.render(r,{sitekey:t,size:"invisible",callback:()=>{w(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{w(e).reCAPTCHAState.succeeded=!1}}),c=w(e);c.reCAPTCHAState=Object.assign(Object.assign({},c.reCAPTCHAState),{widgetId:o})}(e,t,n,r),o.resolve(n)}))}function le(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function pe(e){A(e);const t=w(e).reCAPTCHAState,n=await t.initialized.promise;return new Promise(((t,r)=>{const o=w(e).reCAPTCHAState;n.ready((()=>{t(n.execute(o.widgetId,{action:"fire_app_check"}))}))}))}class de{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t,n;ge(this._throttleData);const r=await pe(this._app).catch((e=>{throw T.create("recaptcha-error")}));if(!(null===(e=w(this._app).reCAPTCHAState)||void 0===e?void 0:e.succeeded))throw T.create("recaptcha-error");let o;try{o=await P(function(e,t){const{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${_}/projects/${n}/apps/${r}:exchangeRecaptchaV3Token?key=${o}`,body:{recaptcha_v3_token:t}}}(this._app,r),this._heartbeatServiceProvider)}catch(e){throw(null===(t=e.code)||void 0===t?void 0:t.includes("fetch-status-error"))?(this._throttleData=fe(Number(null===(n=e.customData)||void 0===n?void 0:n.httpStatus),this._throttleData),T.create("throttled",{time:D(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=Object(c._getProvider)(e,"heartbeat"),oe(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof de&&this._siteKey===e._siteKey}}class ue{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t,n;ge(this._throttleData);const r=await pe(this._app).catch((e=>{throw T.create("recaptcha-error")}));if(!(null===(e=w(this._app).reCAPTCHAState)||void 0===e?void 0:e.succeeded))throw T.create("recaptcha-error");let o;try{o=await P(function(e,t){const{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${_}/projects/${n}/apps/${r}:exchangeRecaptchaEnterpriseToken?key=${o}`,body:{recaptcha_enterprise_token:t}}}(this._app,r),this._heartbeatServiceProvider)}catch(e){throw(null===(t=e.code)||void 0===t?void 0:t.includes("fetch-status-error"))?(this._throttleData=fe(Number(null===(n=e.customData)||void 0===n?void 0:n.httpStatus),this._throttleData),T.create("throttled",{time:D(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=Object(c._getProvider)(e,"heartbeat"),se(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof ue&&this._siteKey===e._siteKey}}class he{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),t=Object(l.N)(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:n})}initialize(e){this._app=e}isEqual(e){return e instanceof he&&this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString()}}function fe(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};{const n=t?t.backoffCount:0,r=Object(l.l)(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function ge(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw T.create("throttled",{time:D(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function me(e=Object(c.getApp)(),t){e=Object(l.z)(e);const n=Object(c._getProvider)(e,"app-check");if(v().initialized||function(){const e=Object(l.y)(),t=v();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new l.a;t.token=n,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(K())}(),V()&&W().then((e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`))),n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(o.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&o.provider.isEqual(t.provider))return r;throw T.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return function(e,t,n){const r=function(e,t){return h.set(e,t),h.get(e)}(e,Object.assign({},f));r.activated=!0,r.provider=t,r.cachedTokenPromise=H(e).then((t=>(t&&te(t)&&(r.token=t,ee(e,{token:t.token})),t))),r.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),w(e).isTokenAutoRefreshEnabled&&J(r,"INTERNAL",(()=>{})),r}const be="app-check-internal";Object(c._registerComponent)(new o.a("app-check",(e=>function(e,t){return new re(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat"))),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider(be).initialize()}))),Object(c._registerComponent)(new o.a(be,(e=>function(e){return{getToken:t=>X(e,t),getLimitedUseToken:()=>Y(e),addTokenListener:t=>J(e,"INTERNAL",t),removeTokenListener:t=>Q(e.app,t)}}(e.getProvider("app-check").getImmediate())),"PUBLIC").setInstantiationMode("EXPLICIT")),Object(c.registerVersion)("@firebase/app-check","0.8.0");const we={"use-before-activation":"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},ve=new l.b("appCheck","AppCheck",we);class _e{constructor(e){this.app=e}activate(e,t){let n;n="string"==typeof e?new de(e):e instanceof ue||e instanceof de||e instanceof he?e:new he({getToken:e.getToken}),this._delegate=me(this.app,{provider:n,isTokenAutoRefreshEnabled:t})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw ve.create("use-before-activation",{appName:this.app.name});!function(e,t){const n=w(e.app);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),n.isTokenAutoRefreshEnabled=t}(this._delegate,e)}getToken(e){if(!this._delegate)throw ve.create("use-before-activation",{appName:this.app.name});return async function(e,t){const n=await X(e,t);if(n.error)throw n.error;return{token:n.token}}(this._delegate,e)}onTokenChanged(e,t,n){if(!this._delegate)throw ve.create("use-before-activation",{appName:this.app.name});return function(e,t,n,r){let o=()=>{},c=()=>{};return o=null!=t.next?t.next.bind(t):t,null!=t.error?c=t.error.bind(t):n&&(c=n),J(e,"EXTERNAL",o,c),()=>Q(e.app,o)}(this._delegate,e,t)}}const ye=e=>{const t=e.getProvider("app-compat").getImmediate();return new _e(t)};r.a.INTERNAL.registerComponent(new o.a("appCheck-compat",ye,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:ue,ReCaptchaV3Provider:de,CustomProvider:he})),r.a.registerVersion("@firebase/app-check-compat","0.3.7")},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),o=n(19),c=n(9),l=n(42);class d{constructor(e,t){this._delegate=e,this.firebase=t,Object(c._addComponent)(e,new o.a("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Object(c.deleteApp)(this._delegate))))}_getService(e,t=c._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=c._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(component){Object(c._addComponent)(this._delegate,component)}_addOrOverwriteComponent(component){Object(c._addOrOverwriteComponent)(this._delegate,component)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const h={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},f=new r.b("app-compat","Firebase",h);const m=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(o,l={}){const d=c.initializeApp(o,l);if(Object(r.m)(t,d.name))return t[d.name];const h=new e(d,n);return t[d.name]=h,h},app:o,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(component){const t=component.name,l=t.replace("-compat","");if(c._registerComponent(component)&&"PUBLIC"===component.type){const c=(e=o())=>{if("function"!=typeof e[l])throw f.create("invalid-app-argument",{appName:t});return e[l]()};void 0!==component.serviceProps&&Object(r.r)(c,component.serviceProps),n[l]=c,e.prototype[l]=function(...e){return this._getService.bind(this,t).apply(this,component.multipleInstances?e:[])}}return"PUBLIC"===component.type?n[l]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:c}};function o(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(r.m)(t,e))throw f.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),o.App=e,n}(d);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.r)(t,e)},createSubscribe:r.o,ErrorFactory:r.b,deepExtend:r.r}),t}(),w=new l.b("@firebase/app-compat");if(Object(r.C)()&&void 0!==self.firebase){w.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&w.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const v=m;var _;Object(c.registerVersion)("@firebase/app-compat","0.2.13",_)},9:function(e,t,n){"use strict";n.r(t),n.d(t,"FirebaseError",(function(){return c.c})),n.d(t,"SDK_VERSION",(function(){return G})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return R})),n.d(t,"_addComponent",(function(){return x})),n.d(t,"_addOrOverwriteComponent",(function(){return F})),n.d(t,"_apps",(function(){return $})),n.d(t,"_clearComponents",(function(){return U})),n.d(t,"_components",(function(){return L})),n.d(t,"_getProvider",(function(){return z})),n.d(t,"_registerComponent",(function(){return B})),n.d(t,"_removeServiceInstance",(function(){return H})),n.d(t,"deleteApp",(function(){return Q})),n.d(t,"getApp",(function(){return Y})),n.d(t,"getApps",(function(){return J})),n.d(t,"initializeApp",(function(){return X})),n.d(t,"onLog",(function(){return ee})),n.d(t,"registerVersion",(function(){return Z})),n.d(t,"setLogLevel",(function(){return te}));var r=n(19),o=n(42),c=n(0);const l=(object,e)=>e.some((e=>object instanceof e));let d,h;const f=new WeakMap,m=new WeakMap,w=new WeakMap,v=new WeakMap,_=new WeakMap;let y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||w.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return k(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function E(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(h||(h=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(T(this),t),k(f.get(this))}:function(...t){return k(e.apply(T(this),t))}:function(t,...n){const r=e.call(T(this),t,...n);return w.set(r,t.sort?t.sort():[t]),k(r)}}function I(e){return"function"==typeof e?E(e):(e instanceof IDBTransaction&&function(e){if(m.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{t(),r()},c=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)}));m.set(e,t)}(e),l(e,d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,y):e)}function k(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{t(k(e.result)),r()},c=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",c)}));return t.then((t=>{t instanceof IDBCursor&&f.set(t,e)})).catch((()=>{})),_.set(t,e),t}(e);if(v.has(e))return v.get(e);const t=I(e);return t!==e&&(v.set(e,t),_.set(t,e)),t}const T=e=>_.get(e);const C=["get","getKey","getAll","getAllKeys","count"],A=["put","add","delete","clear"],D=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(D.get(t))return D.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=A.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!C.includes(n))return;const c=async function(e,...t){const c=this.transaction(e,o?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(t.shift())),(await Promise.all([l[n](...t),o&&c.done]))[0]};return D.set(t,c),c}y=(e=>({...e,get:(t,n,r)=>O(t,n)||e.get(t,n,r),has:(t,n)=>!!O(t,n)||e.has(t,n)}))(y);class P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const component=e.getComponent();return"VERSION"===(null==component?void 0:component.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",N="0.9.13",j=new o.b("@firebase/app"),R="[DEFAULT]",M={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$=new Map,L=new Map;function x(e,component){try{e.container.addComponent(component)}catch(t){j.debug(`Component ${component.name} failed to register with FirebaseApp ${e.name}`,t)}}function F(e,component){e.container.addOrOverwriteComponent(component)}function B(component){const e=component.name;if(L.has(e))return j.debug(`There were multiple attempts to register component ${e}.`),!1;L.set(e,component);for(const e of $.values())x(e,component);return!0}function z(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e,t,n=R){z(e,t).clearInstance(n)}function U(){L.clear()}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},V=new c.b("app","Firebase",K);class W{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw V.create("app-deleted",{appName:this._name})}}const G="9.23.0";function X(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const o=Object.assign({name:R,automaticDataCollectionEnabled:!1},t),l=o.name;if("string"!=typeof l||!l)throw V.create("bad-app-name",{appName:String(l)});if(n||(n=Object(c.u)()),!n)throw V.create("no-options");const d=$.get(l);if(d){if(Object(c.q)(n,d.options)&&Object(c.q)(o,d.config))return d;throw V.create("duplicate-app",{appName:l})}const h=new r.b(l);for(const component of L.values())h.addComponent(component);const f=new W(n,o,h);return $.set(l,f),f}function Y(e=R){const t=$.get(e);if(!t&&e===R&&Object(c.u)())return X();if(!t)throw V.create("no-app",{appName:e});return t}function J(){return Array.from($.values())}async function Q(e){const t=e.name;$.has(t)&&($.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Z(e,t,n){var o;let c=null!==(o=M[e])&&void 0!==o?o:e;n&&(c+=`-${n}`);const l=c.match(/\s|\//),d=t.match(/\s|\//);if(l||d){const e=[`Unable to register library "${c}" with version "${t}":`];return l&&e.push(`library name "${c}" contains illegal characters (whitespace or "/")`),l&&d&&e.push("and"),d&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void j.warn(e.join(" "))}B(new r.a(`${c}-version`,(()=>({library:c,version:t})),"VERSION"))}function ee(e,t){if(null!==e&&"function"!=typeof e)throw V.create("invalid-log-argument");Object(o.d)(e,t)}function te(e){Object(o.c)(e)}const ne="firebase-heartbeat-database",re=1,ae="firebase-heartbeat-store";let ie=null;function oe(){return ie||(ie=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const l=indexedDB.open(e,t),d=k(l);return r&&l.addEventListener("upgradeneeded",(e=>{r(k(l.result),e.oldVersion,e.newVersion,k(l.transaction),e)})),n&&l.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),d.then((e=>{c&&e.addEventListener("close",(()=>c())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),d}(ne,re,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ae)}}).catch((e=>{throw V.create("idb-open",{originalErrorMessage:e.message})}))),ie}async function se(e,t){try{const n=(await oe()).transaction(ae,"readwrite"),r=n.objectStore(ae);await r.put(t,ce(e)),await n.done}catch(e){if(e instanceof c.c)j.warn(e.message);else{const t=V.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});j.warn(t.message)}}}function ce(e){return`${e.name}!${e.options.appId}`}class le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new de(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=pe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=pe(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),ue(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ue(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Object(c.k)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function pe(){return(new Date).toISOString().substring(0,10)}class de{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Object(c.G)()&&Object(c.ab)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await oe();return await t.transaction(ae).objectStore(ae).get(ce(e))}catch(e){if(e instanceof c.c)j.warn(e.message);else{const t=V.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});j.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ue(e){return Object(c.k)(JSON.stringify({version:2,heartbeats:e})).length}var he;he="",B(new r.a("platform-logger",(e=>new P(e)),"PRIVATE")),B(new r.a("heartbeat",(e=>new le(e)),"PRIVATE")),Z(S,N,he),Z(S,N,"esm2017"),Z("fire-js","")}}]);