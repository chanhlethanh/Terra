(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{382:function(e,t,o){e.exports=function(){"use strict";var t=function(e){var t,o=Object.prototype,n=o.hasOwnProperty,r=Object.defineProperty||function(e,t,desc){e[t]=desc.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function f(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,o){return e[t]=o}}function v(e,t,o,n){var l=t&&t.prototype instanceof P?t:P,c=Object.create(l.prototype),d=new B(n||[]);return r(c,"_invoke",{value:T(e,o,d)}),c}function m(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=v;var y="suspendedStart",w="suspendedYield",C="executing",k="completed",x={};function P(){}function S(){}function I(){}var O={};f(O,c,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==o&&n.call(E,c)&&(O=E);var L=I.prototype=P.prototype=Object.create(O);function A(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function o(r,l,c,d){var h=m(e[r],e,l);if("throw"!==h.type){var f=h.arg,v=f.value;return v&&"object"==typeof v&&n.call(v,"__await")?t.resolve(v.__await).then((function(e){o("next",e,c,d)}),(function(e){o("throw",e,c,d)})):t.resolve(v).then((function(e){f.value=e,c(f)}),(function(e){return o("throw",e,c,d)}))}d(h.arg)}var l;function c(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return l=l?l.then(r,r):r()}r(this,"_invoke",{value:c})}function T(e,t,o){var n=y;return function(r,l){if(n===C)throw new Error("Generator is already running");if(n===k){if("throw"===r)throw l;return z()}for(o.method=r,o.arg=l;;){var c=o.delegate;if(c){var d=R(c,o);if(d){if(d===x)continue;return d}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===y)throw n=k,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=C;var h=m(e,t,o);if("normal"===h.type){if(n=o.done?k:w,h.arg===x)continue;return{value:h.arg,done:o.done}}"throw"===h.type&&(n=k,o.method="throw",o.arg=h.arg)}}}function R(e,o){var n=o.method,r=e.iterator[n];if(r===t)return o.delegate=null,"throw"===n&&e.iterator.return&&(o.method="return",o.arg=t,R(e,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),x;var l=m(r,e.iterator,o.arg);if("throw"===l.type)return o.method="throw",o.arg=l.arg,o.delegate=null,x;var c=l.arg;return c?c.done?(o[e.resultName]=c.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,x):c:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,x)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(e){if(null!=e){var o=e[c];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function o(){for(;++i<e.length;)if(n.call(e,i))return o.value=e[i],o.done=!1,o;return o.value=t,o.done=!0,o};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}function z(){return{value:t,done:!0}}return S.prototype=I,r(L,"constructor",{value:I,configurable:!0}),r(I,"constructor",{value:S,configurable:!0}),S.displayName=f(I,h,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,f(e,h,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},A(M.prototype),f(M.prototype,d,(function(){return this})),e.AsyncIterator=M,e.async=function(t,o,n,r,l){void 0===l&&(l=Promise);var c=new M(v(t,o,n,r),l);return e.isGeneratorFunction(o)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},A(L),f(L,h,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var object=Object(e),t=[];for(var o in object)t.push(o);return t.reverse(),function e(){for(;t.length;){var o=t.pop();if(o in object)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=N,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var o=this;function r(n,r){return c.type="throw",c.arg=e,o.next=n,r&&(o.method="next",o.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],c=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var l=r?r.completion:{};return l.type=e,l.arg=t,r?(this.method="next",this.next=r.finallyLoc,x):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),x},finish:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),D(t),x}},catch:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.tryLoc===e){var o=t.completion;if("throw"===o.type){var n=o.arg;D(t)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,o,n){return this.delegate={iterator:N(e),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=t),x}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}var o=0;function n(e){return"__private_"+o+++"_"+e}function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}const l="clevertap-prod.com",c="https:",d="eu1";var h=n("accountId"),f=n("region"),v=n("targetDomain"),m=n("dcSdkversion"),y=n("token");class w{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:""}),Object.defineProperty(this,v,{writable:!0,value:l}),Object.defineProperty(this,m,{writable:!0,value:""}),Object.defineProperty(this,y,{writable:!0,value:""}),this.id=e,t&&(this.region=t),o&&(this.targetDomain=o),n&&(this.token=n)}get id(){return r(this,h)[h]}set id(e){r(this,h)[h]=e}get region(){return r(this,f)[f]}set region(e){r(this,f)[f]=e}get dcSDKVersion(){return r(this,m)[m]}set dcSDKVersion(e){r(this,m)[m]=e}get targetDomain(){return r(this,v)[v]}set targetDomain(e){r(this,v)[v]=e}get token(){return r(this,y)[y]}set token(e){r(this,y)[y]=e}get finalTargetDomain(){return this.region?"".concat(this.region,".").concat(this.targetDomain):this.targetDomain===l?"".concat(d,".").concat(this.targetDomain):this.targetDomain}get dataPostPEURL(){return"".concat(c,"//").concat(this.finalTargetDomain,"/defineVars")}get dataPostURL(){return"".concat(c,"//").concat(this.finalTargetDomain,"/a?t=96")}get recorderURL(){return"".concat(c,"//").concat(this.finalTargetDomain,"/r?r=1")}get emailURL(){return"".concat(c,"//").concat(this.finalTargetDomain,"/e?r=1")}}const C=new RegExp("^\\s+|\\.|:|\\$|'|\"|\\\\|\\s+$","g"),k=new RegExp("^\\s+|'|\"|\\\\|\\s+$","g"),x=new RegExp("'","g"),P="clear",S="Charged ID",I="WZRK_CHARGED_ID",O="WZRK_G",_="WZRK_K",E="WZRK_CAMP",L="WZRK_CAMP_G",A="WZRK_S",M=1200,T="WZRK_EV",R="WZRK_META",j="WZRK_PR",D="WZRK_ARP",B="WZRK_L",N="global",z="display",F="WZRK_WPR",U="optOut",V="ct_optout",W=":OO",G="useIP",H="WZRK_X",K=100,J="isOUL",Z="push",$="ping",Y=31536e3,Q=200,X=12e4,ee=3e5,te="2",ie="cUsY",oe="wzrk_",ne="wzrk_id",re="Notification Viewed",se="Notification Clicked",ae="WZRK_FPU",le="WZRK_PSD",ce="$incr",de="$decr",he="$set",ue="$add",pe="$remove",ge="$delete",fe="WZRK_INBOX_CONFIG",ve="WZRK_INBOX",be=15,me="WZRK_PE",ye=1e3,we=6e5,Ce="wzrk_fetch",ke=["Stayed","UTM Visited","App Launched","Notification Sent",re,se],xe=input=>"string"==typeof input||input instanceof String,Pe=input=>"[object Object]"===Object.prototype.toString.call(input),Se=input=>"object"==typeof input&&input instanceof Date,Ie=e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0},Oe=e=>!isNaN(parseFloat(e))&&isFinite(e),_e=e=>/^-?[\d.]+(?:e-?\d+)?$/.test(e)&&"number"==typeof e,Ee=e=>null!=e&&"undefined"!==e,Le=(e,t)=>{if("object"!=typeof e){let o;return xe(e)?(o=Ae(e,k),o.length>1024&&(o=o.substring(0,1024),t.reportError(521,o+"... length exceeded 1024 chars. Trimmed."))):o=e,o}for(const o in e)if(e.hasOwnProperty(o)){const n=Le(e[o],t);let r;r=Ae(o,C),r.length>1024&&(r=r.substring(0,1024),t.reportError(520,r+"... length exceeded 1024 chars. Trimmed.")),delete e[o],e[r]=n}return e},Ae=(input,e)=>input.replace(e,""),Me=()=>{const e=new Date;return e.getFullYear()+""+e.getMonth()+e.getDay()},Te=()=>Math.floor((new Date).getTime()/1e3),Re=e=>"$D_"+Math.round(e.getTime()/1e3),je=dt=>{if(De(dt))return"$D_"+dt},De=e=>{const t=/^(\d{4})(\d{2})(\d{2})$/.exec(e);if(null==t)return!1;const o=t[3],n=t[2]-1,r=t[1],l=new Date(r,n,o);return l.getDate()==o&&l.getMonth()==n&&l.getFullYear()==r};class Be{static save(e,t){return!(!e||!t)&&(this._isLocalStorageSupported()?(localStorage.setItem(e,"string"==typeof t?t:JSON.stringify(t)),!0):void 0)}static read(e){if(!e)return!1;let data=null;if(this._isLocalStorageSupported()&&(data=localStorage.getItem(e)),null!=data)try{data=JSON.parse(data)}catch(e){}return data}static remove(e){return!!e&&(this._isLocalStorageSupported()?(localStorage.removeItem(e),!0):void 0)}static removeCookie(e,t){let o=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";t&&(o=o+" domain="+t+"; path=/"),document.cookie=o}static createCookie(e,t,o,n){let r="",l="";if(o){const e=new Date;e.setTime(e.getTime()+1e3*o),r="; expires="+e.toGMTString()}n&&(l="; domain="+n),t=encodeURIComponent(t),document.cookie=e+"="+t+r+l+"; path=/"}static readCookie(e){const t=e+"=",o=document.cookie.split(";");for(let e=0;e<o.length;e++){let n=o[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null}static _isLocalStorageSupported(){return"localStorage"in window&&null!==window.localStorage&&"function"==typeof window.localStorage.setItem}static saveToLSorCookie(e,t){if(null!=t)try{this._isLocalStorageSupported()?this.save(e,encodeURIComponent(JSON.stringify(t))):e===O?this.createCookie(e,encodeURIComponent(t),0,window.location.hostname):this.createCookie(e,encodeURIComponent(JSON.stringify(t)),0,window.location.hostname),Ne.globalCache[e]=t}catch(e){}}static readFromLSorCookie(e){let data;if(Ne.globalCache.hasOwnProperty(e))return Ne.globalCache[e];if(data=this._isLocalStorageSupported()?this.read(e):this.readCookie(e),null!=data&&("function"!=typeof data.trim||""!==data.trim())){let t;try{t=JSON.parse(decodeURIComponent(data))}catch(e){t=decodeURIComponent(data)}return Ne.globalCache[e]=t,t}}static createBroadCookie(e,t,o,n){if(n){let l=Ne.broadDomain;if(null==l){const c=n.split(".");let d="";for(let n=c.length-1;n>=0;n--){if(d=0===n?c[n]+d:"."+c[n]+d,this.readCookie(e)){var r="test_"+e+n;if(this.createCookie(r,t,10,d),!this.readCookie(r))continue;this.removeCookie(r,d)}if(this.createCookie(e,t,o,d),this.readCookie(e)==t){l=d,Ne.broadDomain=l;break}}}else this.createCookie(e,t,o,l)}else this.createCookie(e,t,o,n)}static getMetaProp(e){const t=this.readFromLSorCookie(R);if(null!=t)return t[e]}static setMetaProp(e,t){if(this._isLocalStorageSupported()){let o=this.readFromLSorCookie(R);null==o&&(o={}),void 0===t?delete o[e]:o[e]=t,this.saveToLSorCookie(R,o)}}static getAndClearMetaProp(e){const t=this.getMetaProp(e);return this.setMetaProp(e,void 0),t}static setInstantDeleteFlagInK(){let e=this.readFromLSorCookie(_);null==e&&(e={}),e.flag=!0,this.saveToLSorCookie(_,e)}static backupEvent(data,e,t){let o=this.readFromLSorCookie(B);void 0===o&&(o={}),o[e]={q:data},this.saveToLSorCookie(B,o),t.debug("stored in ".concat(B," reqNo : ").concat(e," -> ").concat(data))}static removeBackup(e,t){const o=this.readFromLSorCookie(B);null!=o&&void 0!==o[e]&&(t.debug("del event: ".concat(e," data-> ").concat(o[e].q)),delete o[e],this.saveToLSorCookie(B,o))}}const Ne={globalCache:{gcookie:null,REQ_N:0,RESP_N:0},LRU_CACHE:null,globalProfileMap:void 0,globalEventsMap:void 0,blockRequest:!1,isOptInRequest:!1,broadDomain:null,webPushEnabled:null,campaignDivMap:{},currentSessionId:null,wiz_counter:0,notifApi:{notifEnabledFromApi:!1},unsubGroups:[],updatedCategoryLong:null,inbox:null,isPrivacyArrPushed:!1,privacyArray:[],offline:!1,location:null,dismissSpamControl:!1,globalUnsubscribe:!0,flutterVersion:null,variableStore:{}};var ze=n("keyOrder"),Fe=n("deleteFromObject");class Ue{constructor(e){Object.defineProperty(this,Fe,{value:qe}),Object.defineProperty(this,ze,{writable:!0,value:void 0}),this.max=e;let t=Be.readFromLSorCookie(H);if(t){const e={};r(this,ze)[ze]=[],t=t.cache;for(const o in t)t.hasOwnProperty(o)&&(e[t[o][0]]=t[o][1],r(this,ze)[ze].push(t[o][0]));this.cache=e}else this.cache={},r(this,ze)[ze]=[]}get(e){const t=this.cache[e];return t&&(this.cache=r(this,Fe)[Fe](e,this.cache),this.cache[e]=t,r(this,ze)[ze].push(e)),this.saveCacheToLS(this.cache),t}set(e,t){const o=this.cache[e],n=r(this,ze)[ze];null!=o?this.cache=r(this,Fe)[Fe](e,this.cache):n.length===this.max&&(this.cache=r(this,Fe)[Fe](n[0],this.cache)),this.cache[e]=t,r(this,ze)[ze][r(this,ze)[ze]-1]!==e&&r(this,ze)[ze].push(e),this.saveCacheToLS(this.cache)}saveCacheToLS(e){const t=[],o=r(this,ze)[ze];for(const n in o)if(o.hasOwnProperty(n)){const r=[];r.push(o[n]),r.push(e[o[n]]),t.push(r)}Be.saveToLSorCookie(H,{cache:t})}getKey(e){if(null===e)return null;const t=r(this,ze)[ze];for(const o in t)if(t.hasOwnProperty(o)&&this.cache[t[o]]===e)return t[o];return null}getSecondLastKey(){const e=r(this,ze)[ze];return null!=e&&e.length>1?e[e.length-2]:-1}getLastKey(){const e=r(this,ze)[ze].length;if(e)return r(this,ze)[ze][e-1]}}var qe=function(e,t){const o=JSON.parse(JSON.stringify(r(this,ze)[ze])),n={};let l;for(const r in o)o.hasOwnProperty(r)&&(o[r]!==e?n[o[r]]=t[o[r]]:l=r);return o.splice(l,1),r(this,ze)[ze]=JSON.parse(JSON.stringify(o)),n},Ve=n("logger"),We=n("request"),Ge=n("device"),He=n("session");class Ke{constructor(e){let{logger:t,request:o,device:n,session:l}=e;Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,He,{writable:!0,value:void 0}),r(this,Ve)[Ve]=t,r(this,We)[We]=o,r(this,Ge)[Ge]=n,r(this,He)[He]=l}s(e,t,o,n,l){let c=!1,d=!1;if(window.isOULInProgress&&(o||"undefined"!==n&&n===window.oulReqN)&&(window.isOULInProgress=!1,c=!0),void 0===n&&(n=0),Be.removeBackup(n,r(this,Ve)[Ve]),n>Ne.globalCache.REQ_N)return;if(Ee(r(this,Ge)[Ge].gcookie)||e&&(d=!0),!Ee(r(this,Ge)[Ge].gcookie)||o||"boolean"==typeof l){const n=r(this,He)[He].getSessionCookieObject();if(window.isOULInProgress||n.s&&t<n.s)return;if(r(this,Ve)[Ve].debug("Cookie was ".concat(r(this,Ge)[Ge].gcookie," set to ").concat(e)),r(this,Ge)[Ge].gcookie=e,Ee(r(this,Ge)[Ge].gcookie)||Be.getAndClearMetaProp(G),e&&Be._isLocalStorageSupported()){null==Ne.LRU_CACHE&&(Ne.LRU_CACHE=new Ue(K));const t=Be.readFromLSorCookie(_);let n;null!=t&&t.id&&(n=Ne.LRU_CACHE.cache[t.id],o&&(n||(Be.saveToLSorCookie(ae,!0),Ne.LRU_CACHE.set(t.id,e)))),Be.saveToLSorCookie(O,e);const l=Ne.LRU_CACHE.getSecondLastKey();if(Be.readFromLSorCookie(ae)&&-1!==l){const e=Ne.LRU_CACHE.cache[l];r(this,We)[We].unregisterTokenForGuid(e)}}Be.createBroadCookie(O,e,Y,window.location.hostname),Be.saveToLSorCookie(O,e)}Be._isLocalStorageSupported()&&r(this,He)[He].manageSession(t);const h=r(this,He)[He].getSessionCookieObject();(void 0===h.s||h.s<=t)&&(h.s=t,h.t=Te(),r(this,He)[He].setSessionCookieObject(h)),Ee(r(this,Ge)[Ge].gcookie)&&(Ne.blockRequest=!1),!c&&!d||r(this,We)[We].processingBackup||r(this,We)[We].processBackupEvents(),Ne.globalCache.RESP_N=n}}var Je=n("logger");class Ze{constructor(e){let{logger:t}=e;Object.defineProperty(this,Je,{writable:!0,value:void 0}),this.gcookie=void 0,r(this,Je)[Je]=t,this.gcookie=this.getGuid()}getGuid(){let e=null;if(Ee(this.gcookie))return this.gcookie;if(Be._isLocalStorageSupported()){const t=Be.read(O);if(Ee(t)){try{e=JSON.parse(decodeURIComponent(t))}catch(o){r(this,Je)[Je].debug("Cannot parse Gcookie from localstorage - must be encoded "+t),32===t.length?(e=t,Be.saveToLSorCookie(O,t)):r(this,Je)[Je].error("Illegal guid "+t)}Ee(e)&&Be.createBroadCookie(O,e,Y,window.location.hostname)}}return Ee(e)||(e=Be.readCookie(O),!Ee(e)||0!==e.indexOf("%")&&0!==e.indexOf("'")&&0!==e.indexOf('"')||(e=null),Ee(e)&&Be.saveToLSorCookie(O,e)),e}}const $e="This property has been ignored.",Ye="CleverTap error:",Qe="".concat(Ye," Incorrect embed script."),Xe="".concat(Ye," Event structure not valid. ").concat($e),et="".concat(Ye," Gender value should be either M or F. ").concat($e),tt="".concat(Ye," Employed value should be either Y or N. ").concat($e),it="".concat(Ye," Married value should be either Y or N. ").concat($e),ot="".concat(Ye," Education value should be either School, College or Graduate. ").concat($e),nt="".concat(Ye," Age value should be a number. ").concat($e),st="".concat(Ye," DOB value should be a Date Object"),at="".concat(Ye," setEnum(value). value should be a string or a number"),lt="".concat(Ye," Phone number should be formatted as +[country code][number]");let ct;const ht=e=>{if(Pe(e)){for(var t in e)if(e.hasOwnProperty(t)){if(Pe(e[t])||Array.isArray(e[t]))return!1;Se(e[t])&&(e[t]=Re(e[t]))}return!0}return!1},ut=(e,t)=>{if(Pe(e)){for(var o in e)if(e.hasOwnProperty(o))if("Items"===o){if(!Array.isArray(e[o]))return!1;for(var n in e[o].length>50&&t.reportError(522,"Charged Items exceed 50 limit. Actual count: "+e[o].length),e[o])if(e[o].hasOwnProperty(n)&&(!Pe(e[o][n])||!ht(e[o][n])))return!1}else{if(Pe(e[o])||Array.isArray(e[o]))return!1;Se(e[o])&&(e[o]=Re(e[o]))}if(xe(e[S])||_e(e[S])){const o=e[S]+"";if(void 0===ct&&(ct=Be.readFromLSorCookie(I)),void 0!==ct&&ct.trim()===o.trim())return t.error("Duplicate charged Id - Dropped"+e),!1;ct=o,Be.saveToLSorCookie(I,o)}return!0}return!1};var pt=n("logger"),gt=n("oldValues"),ft=n("request"),vt=n("isPersonalisationActive"),bt=n("processEventArray");class mt extends Array{constructor(e,t){let{logger:o,request:n,isPersonalisationActive:l}=e;super(),Object.defineProperty(this,bt,{value:yt}),Object.defineProperty(this,pt,{writable:!0,value:void 0}),Object.defineProperty(this,gt,{writable:!0,value:void 0}),Object.defineProperty(this,ft,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:void 0}),r(this,pt)[pt]=o,r(this,gt)[gt]=t,r(this,ft)[ft]=n,r(this,vt)[vt]=l}push(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(this,bt)[bt](t),0}_processOldValues(){r(this,gt)[gt]&&r(this,bt)[bt](r(this,gt)[gt]),r(this,gt)[gt]=null}getDetails(e){if(!r(this,vt)[vt]())return;if(void 0===Ne.globalEventsMap&&(Ne.globalEventsMap=Be.readFromLSorCookie(T)),void 0===Ne.globalEventsMap)return;const t=Ne.globalEventsMap[e],o={};return void 0!==t?(o.firstTime=new Date(1e3*t[1]),o.lastTime=new Date(1e3*t[2]),o.count=t[0],o):void 0}}var yt=function(e){if(Array.isArray(e))for(;e.length>0;){var t=e.shift();if(!xe(t)){r(this,pt)[pt].error(Xe);continue}if(t.length>1024&&(t=t.substring(0,1024),r(this,pt)[pt].reportError(510,t+"... length exceeded 1024 chars. Trimmed.")),ke.includes(t)){r(this,pt)[pt].reportError(513,t+" is a restricted system event. It cannot be used as an event name.");continue}const data={type:"event"};if(data.evtName=Ae(t,C),0!==e.length){const o=e.shift();if(Pe(o)){if("Charged"===t){if(!ut(o,r(this,pt)[pt])){r(this,pt)[pt].reportError(511,"Charged event structure invalid. Not sent.");continue}}else if(!ht(o)){r(this,pt)[pt].reportError(512,t+" event structure invalid. Not sent.");continue}data.evtData=o}else e.unshift(o)}r(this,ft)[ft].processEvent(data)}};const wt=e=>{const t={},o=e.indexOf("?");if(o>1){const n=e.substring(o+1);let r;const l=/\+/g,c=/([^&=]+)=?([^&]*)/g,d=function(s){let e=s.replace(l," ");try{e=decodeURIComponent(e)}catch(e){}return e};for(r=c.exec(n);r;)t[d(r[1])]=d(r[2]),r=c.exec(n)}return t},Ct=e=>{if(""===e)return"";var a=document.createElement("a");return a.href=e,a.hostname},kt=(e,t,o)=>e+"&"+t+"="+encodeURIComponent(o),xt=()=>window.location.hostname,Pt=e=>{let t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(t),n=[];for(let i=0;i<o.length;i++)n.push(o.charCodeAt(i));return new Uint8Array(n)},St=(e,t)=>(t&&"function"==typeof t.debug&&t.debug("dobj:"+e),_t(e)),It=e=>{if(null==e)return"";let i,t,o,n={},r={},l="",c="",d="",h=2,f=3,v=2,m="",y=0,w=0,C=String.fromCharCode;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(n,l)||(n[l]=f++,r[l]=!0),c=d+l,Object.prototype.hasOwnProperty.call(n,c))d=c;else{if(Object.prototype.hasOwnProperty.call(r,d)){if(d.charCodeAt(0)<256){for(i=0;i<v;i++)y<<=1,15==w?(w=0,m+=C(y),y=0):w++;for(t=d.charCodeAt(0),i=0;i<8;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1}else{for(t=1,i=0;i<v;i++)y=y<<1|t,15==w?(w=0,m+=C(y),y=0):w++,t=0;for(t=d.charCodeAt(0),i=0;i<16;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1}h--,0==h&&(h=Math.pow(2,v),v++),delete r[d]}else for(t=n[d],i=0;i<v;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1;h--,0==h&&(h=Math.pow(2,v),v++),n[c]=f++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(r,d)){if(d.charCodeAt(0)<256){for(i=0;i<v;i++)y<<=1,15==w?(w=0,m+=C(y),y=0):w++;for(t=d.charCodeAt(0),i=0;i<8;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1}else{for(t=1,i=0;i<v;i++)y=y<<1|t,15==w?(w=0,m+=C(y),y=0):w++,t=0;for(t=d.charCodeAt(0),i=0;i<16;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1}h--,0==h&&(h=Math.pow(2,v),v++),delete r[d]}else for(t=n[d],i=0;i<v;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1;h--,0==h&&(h=Math.pow(2,v),v++)}for(t=2,i=0;i<v;i++)y=y<<1|1&t,15==w?(w=0,m+=C(y),y=0):w++,t>>=1;for(;;){if(y<<=1,15==w){m+=C(y);break}w++}return m},Ot=(()=>{let e="",i=0;for(i=0;i<=25;i++)e+=String.fromCharCode(i+65);for(i=0;i<=25;i++)e+=String.fromCharCode(i+97);for(i=0;i<10;i++)e+=i;return e+"+/="})(),_t=input=>{if(null==input)return"";var e,t,o,n,r,l,c,output="",i=0;for(input=It(input);i<2*input.length;)i%2==0?(e=input.charCodeAt(i/2)>>8,t=255&input.charCodeAt(i/2),o=i/2+1<input.length?input.charCodeAt(i/2+1)>>8:NaN):(e=255&input.charCodeAt((i-1)/2),(i+1)/2<input.length?(t=input.charCodeAt((i+1)/2)>>8,o=255&input.charCodeAt((i+1)/2)):t=o=NaN),i+=3,n=e>>2,r=(3&e)<<4|t>>4,l=(15&t)<<2|o>>6,c=63&o,isNaN(t)?l=c=64:isNaN(o)&&(c=64),output=output+Ot.charAt(n)+Ot.charAt(r)+Ot.charAt(l)+Ot.charAt(c);return output};var Et=n("fireRequest"),Lt=n("dropRequestDueToOptOut"),At=n("addUseIPToRequest"),Mt=n("addARPToRequest");class Tt{constructor(){this.networkRetryCount=0,this.minDelayFrequency=0}static fireRequest(e,t,o,n){r(this,Et)[Et](e,1,t,o,n)}getDelayFrequency(){if(this.logger.debug("Network retry #"+this.networkRetryCount),this.networkRetryCount<10)return this.logger.debug(this.account.id,"Failure count is "+this.networkRetryCount+". Setting delay frequency to 1s"),this.minDelayFrequency=ye,this.minDelayFrequency;if(null==this.account.region)return this.logger.debug(this.account.id,"Setting delay frequency to 1s"),ye;{const e=1e3*(Math.floor(10*Math.random())+1);return this.minDelayFrequency+=e,this.minDelayFrequency<we?(this.logger.debug(this.account.id,"Setting delay frequency to "+this.minDelayFrequency),this.minDelayFrequency):(this.minDelayFrequency=ye,this.logger.debug(this.account.id,"Setting delay frequency to "+this.minDelayFrequency),this.minDelayFrequency)}}}var Rt=function(e,t){if(!0===t){const t={skipResARP:!0};return kt(e,"arp",St(JSON.stringify(t),this.logger))}return Be._isLocalStorageSupported()&&void 0!==localStorage.getItem(D)&&null!==localStorage.getItem(D)?kt(e,"arp",St(JSON.stringify(Be.readFromLSorCookie(D)),this.logger)):e},jt=function(e){var t=Be.getMetaProp(G);return"boolean"!=typeof t&&(t=!1),kt(e,G,t?"true":"false")},Dt=function(){return!Ne.isOptInRequest&&Ee(this.device.gcookie)&&xe(this.device.gcookie)?this.device.gcookie.slice(-3)===W:(Ne.isOptInRequest=!1,!1)},Bt=function(e,t,o,n,l){var c,d;if(r(this,Lt)[Lt]())return void this.logger.debug("req dropped due to optout cookie: "+this.device.gcookie);if(Ee(this.device.gcookie)||(Ne.blockRequest=!0),l&&l===Ce)!Ee(this.device.gcookie)&&Ne.globalCache.RESP_N<Ne.globalCache.REQ_N-1&&setTimeout((()=>{this.logger.debug("retrying fire request for url: ".concat(e,", tries: ").concat(this.networkRetryCount)),r(this,Et)[Et](e,void 0,o,n)}),this.getDelayFrequency());else if(!Ee(this.device.gcookie)&&Ne.globalCache.RESP_N<Ne.globalCache.REQ_N-1&&t<Q)return void setTimeout((()=>{this.logger.debug("retrying fire request for url: ".concat(e,", tries: ").concat(t)),r(this,Et)[Et](e,t+1,o,n)}),50);if(n?window.isOULInProgress=!0:(Ee(this.device.gcookie)&&(e=kt(e,"gc",this.device.gcookie)),e=r(this,Mt)[Mt](e,o)),e=kt(e,"tries",t),e=r(this,At)[At](e),e=kt(e,"r",(new Date).getTime()),(null===(c=window.clevertap)||void 0===c?void 0:c.hasOwnProperty("plugin"))||(null===(d=window.wizrocket)||void 0===d?void 0:d.hasOwnProperty("plugin"))){const t=window.clevertap.plugin||window.wizrocket.plugin;e=kt(e,"ct_pl",t)}-1!==e.indexOf("chrome-extension:")&&(e=e.replace("chrome-extension:","https:"));for(var h=document.getElementsByClassName("ct-jp-cb");h[0]&&h[0].parentNode;)h[0].parentNode.removeChild(h[0]);const s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",e),s.setAttribute("class","ct-jp-cb"),s.setAttribute("rel","nofollow"),s.async=!0,document.getElementsByTagName("head")[0].appendChild(s),this.logger.debug("req snt -> url: "+e)};Tt.logger=void 0,Tt.device=void 0,Tt.account=void 0,Object.defineProperty(Tt,Et,{value:Bt}),Object.defineProperty(Tt,Lt,{value:Dt}),Object.defineProperty(Tt,At,{value:jt}),Object.defineProperty(Tt,Mt,{value:Rt});const Nt=()=>{let e={};if(Be._isLocalStorageSupported()){let t=Be.read(E);null!=t?(t=JSON.parse(decodeURIComponent(t).replace(x,'"')),t.hasOwnProperty("global")?e.wp=t:e=t):e={}}return e},zt=e=>{if(Be._isLocalStorageSupported()){const t={...Nt(),...e},o=JSON.stringify(t);Be.save(E,encodeURIComponent(o)),Ft()}},Ft=()=>{if(Be._isLocalStorageSupported()){let o=Be.read(O);if(Ee(o))try{o=JSON.parse(decodeURIComponent(Be.read(O)));const n=Be.read(L)?JSON.parse(decodeURIComponent(Be.read(L))):{};if(o&&Be._isLocalStorageSupported()){var e={},t=Nt();Object.keys(t).forEach((r=>{const l=o in n&&Object.keys(n[o]).length&&n[o][r]?n[o][r]:{},c=t[r].global,d=Me(),h=t[r][d];if(void 0!==c){const e=Object.keys(c);for(const t in e){let o=[];if(e.hasOwnProperty(t)){let n=0,r=0;const d=e[t];if("tc"===d)continue;void 0!==h&&void 0!==h[d]&&(n=h[d]),void 0!==c&&void 0!==c[d]&&(r=c[d]),o=[d,n,r],l[d]=o}}}e={...e,[r]:l}})),n[o]=e,Be.save(L,encodeURIComponent(JSON.stringify(n)))}}catch(e){console.error("Invalid clevertap Id "+e)}}},Ut=()=>{const e=JSON.parse(decodeURIComponent(Be.read(O)));let t={};if(Be._isLocalStorageSupported()){let o={};t=Nt();const n=Be.read(L),r=n?decodeURIComponent(n):null,l=r?JSON.parse(r):null,c=e&&null!=n&&l&&l[e]&&l[e].wp?Object.values(l[e].wp):[],d=e&&null!=n&&l&&l[e]&&l[e].wi?Object.values(l[e].wi):[],h=Me();let f=0,v=0;return t.wp&&t.wp[h]&&"undefined"!==t.wp[h].tc&&(f=t.wp[h].tc),t.wi&&t.wi[h]&&"undefined"!==t.wi[h].tc&&(v=t.wi[h].tc),o={wmp:f,wimp:v,tlc:c,witlc:d},o}},qt=(e,t)=>{let{logger:o}=t,n=!1;if(Pe(e))for(const t in e)if(e.hasOwnProperty(t)){n=!0;let r=e[t];if(null==r){delete e[t];continue}"Gender"!==t||r.match(/^M$|^F$/)||(n=!1,o.error(et)),"Employed"!==t||r.match(/^Y$|^N$/)||(n=!1,o.error(tt)),"Married"!==t||r.match(/^Y$|^N$/)||(n=!1,o.error(it)),"Education"!==t||r.match(/^School$|^College$|^Graduate$/)||(n=!1,o.error(ot)),"Age"===t&&null!=r&&(Oe(r)?e.Age=+r:(n=!1,o.error(nt))),"DOB"===t?(/^\$D_/.test(r)&&11===(r+"").length||Se(r)||(n=!1,o.error(st)),Se(r)&&(e[t]=Re(r))):Se(r)&&(e[t]=Re(r)),"Phone"!==t||Ie(r)||(r.length>8&&"+"===r.charAt(0)?(r=r.substring(1,r.length),Oe(r)?e.Phone=+r:(n=!1,o.error(lt+". Removed."))):(n=!1,o.error(lt+". Removed."))),n||delete e[t]}return n},Vt=e=>{const t={};t.Name=e.name,null!=e.id&&(t.FBID=e.id+""),"male"===e.gender?t.Gender="M":"female"===e.gender?t.Gender="F":t.Gender="O";const o=function(e){if(null!=e){let t="",o="";for(let i=0;i<e.length;i++){const n=e[i];if(null!=n.type){const e=n.type;if("Graduate School"===e)return"Graduate";"College"===e?t="1":"High School"===e&&(o="1")}}if("1"===t)return"College";if("1"===o)return"School"}};null!=e.relationship_status&&(t.Married="N","Married"===e.relationship_status&&(t.Married="Y"));const n=o(e.education);null!=n&&(t.Education=n);const r=null!=e.work?e.work.length:0;if(t.Employed=r>0?"Y":"N",null!=e.email&&(t.Email=e.email),null!=e.birthday){const o=e.birthday.split("/");t.DOB=je(o[2]+o[0]+o[1])}return t},Wt=(e,t)=>{let{logger:o}=t;const n={};if(null!=e.displayName&&(n.Name=e.displayName),null!=e.id&&(n.GPID=e.id+""),null!=e.gender&&("male"===e.gender?n.Gender="M":"female"===e.gender?n.Gender="F":"other"===e.gender&&(n.Gender="O")),null!=e.image&&!1===e.image.isDefault&&(n.Photo=e.image.url.split("?sz")[0]),null!=e.emails)for(let t=0;t<e.emails.length;t++){const o=e.emails[t];"account"===o.type&&(n.Email=o.value)}if(null!=e.organizations){n.Employed="N";for(let i=0;i<e.organizations.length;i++)"work"===e.organizations[i].type&&(n.Employed="Y")}if(null!=e.birthday){const t=e.birthday.split("-");n.DOB=je(t[0]+t[1]+t[2])}return null!=e.relationshipStatus&&(n.Married="N","married"===e.relationshipStatus&&(n.Married="Y")),o.debug("gplus usr profile "+JSON.stringify(n)),n},Gt=(e,t)=>{if(Be._isLocalStorageSupported()){if(null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j),null==Ne.globalProfileMap&&(Ne.globalProfileMap={})),null!=e._custom){const t=e._custom;for(const o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);delete e._custom}for(const o in e)if(e.hasOwnProperty(o)){if(Ne.globalProfileMap.hasOwnProperty(o)&&!t)continue;Ne.globalProfileMap[o]=e[o]}null!=Ne.globalProfileMap._custom&&delete Ne.globalProfileMap._custom,Be.saveToLSorCookie(j,Ne.globalProfileMap)}},Ht=(e,t,o)=>{if(null!=e&&"-1"!==e&&Be._isLocalStorageSupported()){const t=Nt();let n=t.wp[o];null==n&&(n={},t[o]=n),n[e]="dnd",zt(t)}if(null!=Ne.campaignDivMap){const t=Ne.campaignDivMap[e];null!=t&&(document.getElementById(t).style.display="none","intentPreview"===t&&null!=document.getElementById("intentOpacityDiv")&&(document.getElementById("intentOpacityDiv").style.display="none"))}},Kt=e=>{if(null!=e.skipResARP&&e.skipResARP)return console.debug("Update ARP Request rejected",e),null;const t=!0===e[J];if(Be._isLocalStorageSupported())try{let o=Be.readFromLSorCookie(D);if(null==o||t){o={};for(const t in e)e.hasOwnProperty(t)&&(-1===e[t]?delete o[t]:o[t]=e[t]);Be.saveToLSorCookie(D,o)}}catch(e){console.error("Unable to parse ARP JSON: "+e)}},Jt=(e,t)=>{if(xe(e)||_e(e))return"$E_"+e;t.error(at)},Zt=(e,t,o,n,r)=>{const l=wt(location.href),c=l.e,d=l.p,h=l.page_type;if(void 0!==c){const data={};data.id=n.id,data.unsubGroups=Ne.unsubGroups,Ne.updatedCategoryLong&&(data[ie]=Ne.updatedCategoryLong);let l=n.emailURL;o&&(l=kt(l,"fetchGroups",o)),t&&(l=kt(l,"encoded",t)),l=kt(l,"e",c),l=kt(l,"d",St(JSON.stringify(data),r)),d&&(l=kt(l,"p",d)),"-1"!==e&&(l=kt(l,"sub",e)),h&&(Ne.globalUnsubscribe=h===N,l=kt(l,"page_type",h)),Tt.fireRequest(l)}};var $t=n("logger"),Yt=n("request"),Qt=n("account"),Xt=n("oldValues"),ei=n("isPersonalisationActive"),ti=n("processProfileArray");class ii extends Array{constructor(e,t){let{logger:o,request:n,account:l,isPersonalisationActive:c}=e;super(),Object.defineProperty(this,ti,{value:oi}),Object.defineProperty(this,$t,{writable:!0,value:void 0}),Object.defineProperty(this,Yt,{writable:!0,value:void 0}),Object.defineProperty(this,Qt,{writable:!0,value:void 0}),Object.defineProperty(this,Xt,{writable:!0,value:void 0}),Object.defineProperty(this,ei,{writable:!0,value:void 0}),r(this,$t)[$t]=o,r(this,Yt)[Yt]=n,r(this,Qt)[Qt]=l,r(this,Xt)[Xt]=t,r(this,ei)[ei]=c}push(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(this,ti)[ti](t),0}_processOldValues(){r(this,Xt)[Xt]&&r(this,ti)[ti](r(this,Xt)[Xt]),r(this,Xt)[Xt]=null}getAttribute(e){if(r(this,ei)[ei]())return null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j)),null!=Ne.globalProfileMap?Ne.globalProfileMap[e]:void 0}_handleIncrementDecrementValue(e,t,o){var n;if(null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j)),null!=Ne.globalProfileMap||(null===(n=Ne.globalProfileMap)||void 0===n?void 0:n.hasOwnProperty(e)))if(!t||"number"!=typeof t||t<=0)console.error("Value should be a number greater than 0");else{Ne.globalProfileMap[e]=o===ce?Ne.globalProfileMap[e]+t:Ne.globalProfileMap[e]-t,Be.saveToLSorCookie(j,Ne.globalProfileMap);let data={};const n={};data.type="profile",n[e]={[o]:t},null==n.tz&&(n.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),data.profile=n,data=r(this,Yt)[Yt].addSystemDataToObject(data,void 0),r(this,Yt)[Yt].addFlags(data);const l=St(JSON.stringify(data),r(this,$t)[$t]);let c=r(this,Qt)[Qt].dataPostURL;c=kt(c,"type",Z),c=kt(c,"d",l),r(this,Yt)[Yt].saveAndFireRequest(c,Ne.blockRequest)}else console.error("Kindly create profile with required proprty to increment/decrement.")}_handleMultiValueSet(e,t,o){const n=[];for(let i=0;i<t.length;i++)"number"!=typeof t[i]||n.includes(t[i])?"string"!=typeof t[i]||n.includes(t[i].toLowerCase())?console.error("array supports only string or number type values"):n.push(t[i].toLowerCase()):n.push(t[i]);var r;null==Ne.globalProfileMap&&(Ne.globalProfileMap=null!==(r=Be.readFromLSorCookie(j))&&void 0!==r?r:{}),Ne.globalProfileMap[e]=n,Be.saveToLSorCookie(j,Ne.globalProfileMap),this.sendMultiValueData(e,t,o)}_handleMultiValueAdd(e,t,o){var n=[];if(null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j)||{}),"string"==typeof t||"number"==typeof t)Ne.globalProfileMap.hasOwnProperty(e)?(n=Ne.globalProfileMap[e]).push("number"==typeof t?t:t.toLowerCase()):Ne.globalProfileMap[e]=t;else{Ne.globalProfileMap.hasOwnProperty(e)&&(n=Array.isArray(Ne.globalProfileMap[e])?Ne.globalProfileMap[e]:[Ne.globalProfileMap[e]]);for(var i=0;i<t.length;i++)"number"!=typeof t[i]||n.includes(t[i])?"string"!=typeof t[i]||n.includes(t[i].toLowerCase())?"number"==typeof t[i]&&n.includes(t[i])||"string"==typeof t[i]&&n.includes(t[i].toLowerCase())?console.error("Values already included"):console.error("Array supports only string or number type values"):n.push(t[i].toLowerCase()):n.push(t[i]);Ne.globalProfileMap[e]=n}Be.saveToLSorCookie(j,Ne.globalProfileMap),this.sendMultiValueData(e,t,o)}_handleMultiValueRemove(e,t,o){var n;if(null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j)),null==Ne||null===(n=Ne.globalProfileMap)||void 0===n?void 0:n.hasOwnProperty(e))if("string"==typeof t||"number"==typeof t){var r=Ne.globalProfileMap[e].indexOf(t);-1!==r&&Ne.globalProfileMap[e].splice(r,1)}else for(var l=0;l<t.length;l++){var c=Ne.globalProfileMap[e].indexOf(t[l]);-1!==c&&Ne.globalProfileMap[e].splice(c,1)}else console.error("The property ".concat(e," does not exist."));Be.saveToLSorCookie(j,Ne.globalProfileMap),this.sendMultiValueData(e,t,o)}_handleMultiValueDelete(e,t){var o;null==Ne.globalProfileMap&&(Ne.globalProfileMap=Be.readFromLSorCookie(j)),(null==Ne||null===(o=Ne.globalProfileMap)||void 0===o?void 0:o.hasOwnProperty(e))?delete Ne.globalProfileMap[e]:console.error("The property ".concat(e," does not exist.")),Be.saveToLSorCookie(j,Ne.globalProfileMap),this.sendMultiValueData(e,null,t)}sendMultiValueData(e,t,o){let data={};const n={};data.type="profile",n[e]={[o]:o===ge||t},null==n.tz&&(n.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),data.profile=n,data=r(this,Yt)[Yt].addSystemDataToObject(data,void 0),r(this,Yt)[Yt].addFlags(data);const l=St(JSON.stringify(data),r(this,$t)[$t]);let c=r(this,Qt)[Qt].dataPostURL;c=kt(c,"type",Z),c=kt(c,"d",l),r(this,Yt)[Yt].saveAndFireRequest(c,Ne.blockRequest)}}var oi=function(e){if(Array.isArray(e)&&e.length>0)for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];let n,data={};if(null!=o.Site){if(n=o.Site,Ie(n)||!qt(n,{logger:r(this,$t)[$t]}))return}else if(null!=o.Facebook){const e=o.Facebook;Ie(e)||e.error||(n=Vt(e))}else if(null!=o["Google Plus"]){const e=o["Google Plus"];Ie(e)||e.error||(n=Wt(e,{logger:r(this,$t)[$t]}))}if(null!=n&&!Ie(n)){data.type="profile",null==n.tz&&(n.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),data.profile=n,Gt(n,!0),data=r(this,Yt)[Yt].addSystemDataToObject(data,void 0),r(this,Yt)[Yt].addFlags(data);const e=St(JSON.stringify(data),r(this,$t)[$t]);let t=r(this,Qt)[Qt].dataPostURL;t=kt(t,"type",Z),t=kt(t,"d",e),r(this,Yt)[Yt].saveAndFireRequest(t,Ne.blockRequest)}}},ni=n("request"),ri=n("logger"),si=n("account"),ai=n("session"),ci=n("oldValues"),di=n("device"),hi=n("processOUL"),ui=n("handleCookieFromCache"),pi=n("deleteUser"),gi=n("processLoginArray");class fi extends Array{constructor(e,t){let{request:o,account:n,session:l,logger:c,device:d}=e;super(),Object.defineProperty(this,gi,{value:yi}),Object.defineProperty(this,pi,{value:mi}),Object.defineProperty(this,ui,{value:bi}),Object.defineProperty(this,hi,{value:vi}),Object.defineProperty(this,ni,{writable:!0,value:void 0}),Object.defineProperty(this,ri,{writable:!0,value:void 0}),Object.defineProperty(this,si,{writable:!0,value:void 0}),Object.defineProperty(this,ai,{writable:!0,value:void 0}),Object.defineProperty(this,ci,{writable:!0,value:void 0}),Object.defineProperty(this,di,{writable:!0,value:void 0}),r(this,ni)[ni]=o,r(this,si)[si]=n,r(this,ai)[ai]=l,r(this,ri)[ri]=c,r(this,ci)[ci]=t,r(this,di)[di]=d}clear(){r(this,ri)[ri].debug("clear called. Reset flag has been set."),r(this,pi)[pi](),Be.setMetaProp(P,!0)}push(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(this,gi)[gi](t),0}_processOldValues(){r(this,ci)[ci]&&r(this,gi)[gi](r(this,ci)[ci]),r(this,ci)[ci]=null}}var vi=function(e){let t=!0;Be.saveToLSorCookie(ae,t);const o=e=>{let o=Be.readFromLSorCookie(_);const g=Be.readFromLSorCookie(O);let n;if(null==o)o={},n=e;else{n=o.id;let l=!1,c=!1;if(null==n&&(n=e[0],l=!0),null==Ne.LRU_CACHE&&Be._isLocalStorageSupported()&&(Ne.LRU_CACHE=new Ue(K)),l)null!=g&&(Ne.LRU_CACHE.set(n,g),Ne.blockRequest=!1);else for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];if(Ne.LRU_CACHE.cache[o]){n=o,c=!0;break}}if(c){n!==Ne.LRU_CACHE.getLastKey()?r(this,ui)[ui]():(t=!1,Be.saveToLSorCookie(ae,t));const e=Ne.LRU_CACHE.get(n);Ne.LRU_CACHE.set(n,e),Be.saveToLSorCookie(O,e),r(this,di)[di].gcookie=e;const o=Ne.LRU_CACHE.getSecondLastKey();if(Be.readFromLSorCookie(ae)&&-1!==o){const e=Ne.LRU_CACHE.cache[o];r(this,ni)[ni].unregisterTokenForGuid(e)}}else l?null!=g&&(r(this,di)[di].gcookie=g,Be.saveToLSorCookie(O,g),t=!1):this.clear(),Be.saveToLSorCookie(ae,!1),n=e[0]}o.id=n,Be.saveToLSorCookie(_,o)};if(Array.isArray(e)&&e.length>0)for(const n in e)if(e.hasOwnProperty(n)){const l=e[n];let c,data={};if(null!=l.Site){if(c=l.Site,Ie(c)||!qt(c,{logger:r(this,ri)[ri]}))return}else if(null!=l.Facebook){const e=l.Facebook;Ie(e)||e.error||(c=Vt(e))}else if(null!=l["Google Plus"]){const e=l["Google Plus"];Ie(e)&&!e.error&&(c=Wt(e,{logger:r(this,ri)[ri]}))}if(null!=c&&!Ie(c)){data.type="profile",null==c.tz&&(c.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),data.profile=c;const e=[];Be._isLocalStorageSupported()&&(c.Identity&&e.push(c.Identity),c.Email&&e.push(c.Email),c.GPID&&e.push("GP:"+c.GPID),c.FBID&&e.push("FB:"+c.FBID),e.length>0&&o(e)),Gt(c,!0),data=r(this,ni)[ni].addSystemDataToObject(data,void 0),r(this,ni)[ni].addFlags(data),t&&(data[J]=!0);const n=St(JSON.stringify(data),r(this,ri)[ri]);let l=r(this,si)[si].dataPostURL;l=kt(l,"type",Z),l=kt(l,"d",n),r(this,ni)[ni].saveAndFireRequest(l,Ne.blockRequest,t)}}},bi=function(){Ne.blockRequest=!1,console.debug("Block request is false"),Be._isLocalStorageSupported()&&(delete localStorage[j],delete localStorage[T],delete localStorage[R],delete localStorage[D],delete localStorage[E],delete localStorage[I]),Be.removeCookie(E,xt()),Be.removeCookie(r(this,ai)[ai].cookieName,Ne.broadDomain),Be.removeCookie(D,Ne.broadDomain),r(this,ai)[ai].setSessionCookieObject("")},mi=function(){Ne.blockRequest=!0,r(this,ri)[ri].debug("Block request is true"),Ne.globalCache={gcookie:null,REQ_N:0,RESP_N:0},Be._isLocalStorageSupported()&&(delete localStorage[O],delete localStorage[_],delete localStorage[j],delete localStorage[T],delete localStorage[R],delete localStorage[D],delete localStorage[E],delete localStorage[I]),Be.removeCookie(O,Ne.broadDomain),Be.removeCookie(E,xt()),Be.removeCookie(_,xt()),Be.removeCookie(r(this,ai)[ai].cookieName,Ne.broadDomain),Be.removeCookie(D,Ne.broadDomain),r(this,di)[di].gcookie=null,r(this,ai)[ai].setSessionCookieObject("")},yi=function(e){if(Array.isArray(e)&&e.length>0){const t=e.pop();if(null!=t&&Pe(t)&&(null!=t.Site&&Object.keys(t.Site).length>0||null!=t.Facebook&&Object.keys(t.Facebook).length>0||null!=t["Google Plus"]&&Object.keys(t["Google Plus"]).length>0)){Be.setInstantDeleteFlagInK();try{r(this,hi)[hi]([t])}catch(e){r(this,ri)[ri].debug(e)}}else r(this,ri)[ri].error("Profile object is in incorrect format")}};class wi extends HTMLElement{constructor(){super(),this._details=null,this.shadow=null,this.shadow=this.attachShadow({mode:"open"})}get details(){return this._details||""}set details(e){null===this._details&&(this._details=e,this.renderBanner())}renderBanner(){this.shadow.innerHTML=this.getBannerContent(),!1!==this.trackClick&&this.addEventListener("click",(()=>{const e=this.details.onClick;e&&(this.details.window?window.open(e,"_blank"):window.parent.location.href=e),window.clevertap.renderNotificationClicked({msgId:this.msgId,pivotId:this.pivotId})})),window.clevertap.renderNotificationViewed({msgId:this.msgId,pivotId:this.pivotId})}getBannerContent(){return'\n      <style type="text/css">\n        .banner {\n          position: relative;\n          cursor: '.concat(this.details.onClick?"pointer":"","\n        }\n        img {\n          height: ").concat(this.divHeight?this.divHeight:"auto",";\n          width: 100%;\n        }\n        .wrapper:is(.left, .right, .center) {\n          display: flex;\n          justify-content: center;\n          flex-direction: column;\n          align-items: center;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          overflow: auto;\n          top: 0;\n        }\n        ").concat(this.details.css?this.details.css:"",'\n      </style>\n      <div class="banner">\n        <picture>\n          <source media="(min-width:480px)" srcset="').concat(this.details.desktopImageURL,'">\n          <source srcset="').concat(this.details.mobileImageURL,'">\n          <img src="').concat(this.details.desktopImageURL,'" alt="Please upload a picture" style="width:100%;" part="banner__img">\n        </picture>\n        ').concat(this.details.html?this.details.html:"","\n      </div>\n    ")}}class Ci extends HTMLElement{constructor(){super(),this._target=null,this._carousel=null,this.shadow=null,this.slides=0,this.previouslySelectedItem=-1,this.selectedItem=1,this.autoSlide=null,this.stopAutoSlideTimeout=null,this.shadow=this.attachShadow({mode:"open"}),void 0===customElements.get("ct-web-personalisation-banner")&&customElements.define("ct-web-personalisation-banner",wi)}get target(){return this._target||""}set target(e){null===this._target&&(this._target=e,this.renderCarousel())}get details(){return this.target.display.details}get display(){return this.target.display}renderCarousel(){this.slides=this.details.length,this.shadow.innerHTML=this.getStyles();const e=this.getCarouselContent();this.display.showNavBtns&&e.insertAdjacentHTML("beforeend",this.display.navBtnsHtml),this.display.showNavArrows&&(e.insertAdjacentHTML("beforeend",this.display.leftNavArrowHtml),e.insertAdjacentHTML("beforeend",this.display.rightNavArrowHtml)),this._carousel=e,this.shadow.appendChild(e),this.setupClick(),this.updateSelectedItem(),this.startAutoSlide(),this.setupOnHover(),window.clevertap.renderNotificationViewed({msgId:this.target.wzrk_id,pivotId:this.target.wzrk_pivot})}setupClick(){this._carousel.addEventListener("click",(e=>{const t=e.target.id;if(t.startsWith("carousel__button")){const e=+t.split("-")[1];e!==this.selectedItem&&(this.previouslySelectedItem=this.selectedItem,this.selectedItem=e,this.updateSelectedItem(),this.startAutoSlide())}else if(t.startsWith("carousel__arrow"))t.endsWith("right")?this.goToNext():this.goToPrev(),this.startAutoSlide();else if(t.indexOf("-")>-1){const e=+t.split("-")[1],o=e-1;window.parent.clevertap&&window.clevertap.renderNotificationClicked({msgId:this.target.wzrk_id,pivotId:this.target.wzrk_pivot,wzrk_slideNo:e});const n=this.details[o].onClick;""!==n&&(this.details[o].window?window.open(n,"_blank"):window.location.href=n)}}))}setupOnHover(){this._carousel.addEventListener("mouseenter",(e=>{this.stopAutoSlideTimeout=setTimeout((()=>{this.autoSlide=clearInterval(this.autoSlide)}),500)})),this._carousel.addEventListener("mouseleave",(e=>{clearTimeout(this.stopAutoSlideTimeout),void 0===this.autoSlide&&this.startAutoSlide()}))}getCarouselContent(){const e=document.createElement("div");return e.setAttribute("class","carousel"),this.details.forEach(((t,i)=>{const o=document.createElement("ct-web-personalisation-banner");o.classList.add("carousel__item"),o.trackClick=!1,o.setAttribute("id","carousel__item-".concat(i+1)),o.details=t,e.appendChild(o)})),e}getStyles(){var e,t;return"\n      <style>\n      .carousel {\n        position: relative;\n      }\n\n      .carousel__item {\n        background-color: grey;\n        display: none;\n        background-repeat: no-repeat;\n        background-size: cover;\n      }\n\n      ct-web-personalisation-banner::part(banner__img) {\n        height: ".concat((null==this||null===(e=this.target)||void 0===e||null===(t=e.display)||void 0===t?void 0:t.divHeight)?this.target.display.divHeight:"auto",";\n        width: 100%;\n        transition: 2s;\n      }\n\n      .carousel__item--selected {\n        display: block;\n      }\n      ").concat(this.display.navBtnsCss,"\n      ").concat(this.display.navArrowsCss,"\n      </style>\n  ")}updateSelectedItem(){if(-1!==this.previouslySelectedItem){const e=this.shadow.getElementById("carousel__item-".concat(this.previouslySelectedItem)),t=this.shadow.getElementById("carousel__button-".concat(this.previouslySelectedItem));e.classList.remove("carousel__item--selected"),t&&t.classList.remove("carousel__button--selected")}const e=this.shadow.getElementById("carousel__item-".concat(this.selectedItem)),button=this.shadow.getElementById("carousel__button-".concat(this.selectedItem));e.classList.add("carousel__item--selected"),button&&button.classList.add("carousel__button--selected")}startAutoSlide(){clearInterval(this.autoSlide),this.autoSlide=setInterval((()=>{this.goToNext()}),this.display.sliderTime?1e3*this.display.sliderTime:3e3)}goToNext(){this.goTo(this.selectedItem,(this.selectedItem+1)%this.slides)}goToPrev(){this.goTo(this.selectedItem,this.selectedItem-1)}goTo(e,t){this.previouslySelectedItem=e,this.selectedItem=t,0===t&&(this.selectedItem=this.slides),this.updateSelectedItem()}}class ki extends HTMLElement{constructor(){super(),this._target=null,this._session=null,this.shadow=null,this.popup=null,this.container=null,this.resizeObserver=null,this.shadow=this.attachShadow({mode:"open"})}get target(){return this._target||""}set target(e){null===this._target&&(this._target=e,this.renderImageOnlyPopup())}get session(){return this._session||""}set session(e){this._session=e}get msgId(){return this.target.wzrk_id}get pivotId(){return this.target.wzrk_pivot}get onClickUrl(){return this.target.display.onClickUrl}renderImageOnlyPopup(){const e=this.target.wzrk_id.split("_")[0],t=this.session.sessionId;this.shadow.innerHTML=this.getImageOnlyPopupContent(),this.popup=this.shadowRoot.getElementById("imageOnlyPopup"),this.container=this.shadowRoot.getElementById("container"),this.closeIcon=this.shadowRoot.getElementById("close"),this.popup.addEventListener("load",this.updateImageAndContainerWidth()),this.resizeObserver=new ResizeObserver((()=>this.handleResize(this.popup,this.container))),this.resizeObserver.observe(this.popup),this.closeIcon.addEventListener("click",(()=>{if(this.resizeObserver.unobserve(this.popup),document.getElementById("wzrkImageOnlyDiv").style.display="none",this.remove(),null!=e&&"-1"!==e&&Be._isLocalStorageSupported()){const o=Nt();let n=o.wp[t];null==n&&(n={},o[t]=n),n[e]="dnd",zt(o)}})),window.clevertap.renderNotificationViewed({msgId:this.msgId,pivotId:this.pivotId}),this.onClickUrl&&this.popup.addEventListener("click",(()=>{this.target.display.window?window.open(this.onClickUrl,"_blank"):window.parent.location.href=this.onClickUrl,window.clevertap.renderNotificationClicked({msgId:this.msgId,pivotId:this.pivotId})}))}handleResize(e,t){const o=this.getRenderedImageWidth(e);t.style.setProperty("width","".concat(o,"px"))}getImageOnlyPopupContent(){return"\n        ".concat(this.target.msgContent.css,"\n        ").concat(this.target.msgContent.html,"\n      ")}updateImageAndContainerWidth(){return()=>{const e=this.getRenderedImageWidth(this.popup);this.popup.style.setProperty("width","".concat(e,"px")),this.container.style.setProperty("width","".concat(e,"px")),this.container.style.setProperty("height","auto"),this.container.style.setProperty("position","fixed"),this.popup.style.setProperty("visibility","visible"),this.closeIcon.style.setProperty("visibility","visible"),document.getElementById("wzrkImageOnlyDiv").style.visibility="visible"}}getRenderedImageWidth(img){const e=img.naturalWidth/img.naturalHeight;return img.height*e}}class xi extends HTMLElement{constructor(e,t){super(),this.wrapper=null,this.snackBar=null,this.shadow=this.attachShadow({mode:"open"}),this.config=e,this.message=t,this.renderMessage(t)}get pivotId(){return this.message.wzrk_pivot}get campaignId(){return this.message.wzrk_id}createEl(e,t,o){const n=document.createElement(e);return n.setAttribute("id",t),n.setAttribute("part",o||t),n}renderMessage(e){switch(this.wrapper=this.createEl("div","messageWrapper"),e.templateType){case"text-only":case"text-with-icon":case"text-with-icon-and-image":{const t=this.prepareBasicMessage(e.msg[0]);this.wrapper.appendChild(t)}}const t=this.createEl("div","timeStamp");if(t.innerHTML="<span>".concat(Di(e.id.split("_")[1]),"<span>"),!e.viewed){const e=this.createEl("span","unreadMarker");t.appendChild(e)}this.wrapper.appendChild(t),this.shadow.appendChild(this.wrapper)}prepareBasicMessage(e){const t=this.createEl("div","message");if(e.imageUrl){const o=this.addImage(e.imageUrl,"mainImg");t.appendChild(o)}const o=this.createEl("div","iconTitleDescWrapper");if(e.iconUrl){const t=this.addImage(e.iconUrl,"iconImg");o.appendChild(t)}const n=this.createEl("div","titleDescWrapper");if(e.title){const title=this.createEl("div","title");title.innerText=e.title,n.appendChild(title)}if(e.description){const t=this.createEl("div","description");t.innerText=e.description,n.appendChild(t)}if((e.title||e.description)&&o.appendChild(n),(e.iconUrl||e.title||e.description)&&t.appendChild(o),e.buttons&&e.buttons.length){const o=this.addButtons(e.buttons);t.appendChild(o)}return t}addButtons(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.createEl("div","buttonsContainer");let o=!1;return e.forEach(((b,i)=>{const button=this.createEl("button","button-".concat(i),"button");button.innerText=b.text,i>0&&(button.style.cssText+="margin-left: 2px;"),"copy"===b.action&&(o=!0),t.appendChild(button)})),o&&this.addSnackbar(t),t}addSnackbar(e){this.snackBar=this.createEl("div","snackbar-".concat(this.campaignId),"snackbar"),this.snackBar.innerHTML=zi;const t=this.createEl("span","snackbar-msg-".concat(this.campaignId),"snackbar-msg");t.innerText="Copied to clipboard",this.snackBar.appendChild(t),e.appendChild(this.snackBar)}addImage(e,t){const o=this.createEl("div","".concat(t,"Container")),image=this.createEl("img",t);return image.setAttribute("src",e),image.setAttribute("loading","lazy"),o.appendChild(image),o}raiseClickedEvent(path,e){switch(this.message.templateType){case"text-only":case"text-with-icon":case"text-with-icon-and-image":this.raiseClickedForBasicTemplates(path,e)}}raiseClickedForBasicTemplates(path,e){const t=this.message.msg[0],o={msgId:this.campaignId,pivotId:this.pivotId};if("BUTTON"===path.tagName){const e=path.id.split("-")[1],button=t.buttons[e];o.kv={wzrk_c2a:button.text},"url"===button.action?button.openUrlInNewTab?window.open(button.url,"_blank"):window.location=button.url:"copy"===button.action&&(window.focus(),navigator.clipboard.writeText(button.clipboardText),this.snackBar.style.setProperty("display","flex","important"),setTimeout((()=>{this.snackBar.style.setProperty("display","none","important")}),2e3))}else"CT-INBOX-MESSAGE"===path.tagName&&t.onClickUrl&&(t.openUrlInNewTab?window.open(t.onClickUrl,"_blank"):window.location=t.onClickUrl);e?console.log("Notifiction clicked event will be raised at run time with payload ::",o):window.clevertap.renderNotificationClicked(o)}}const Pi=e=>{let{backgroundColor:t,borderColor:o,titleColor:n,descriptionColor:r,buttonColor:l,buttonTextColor:c,unreadMarkerColor:d}=e;return'\n    <style id="messageStyles">\n      ct-inbox-message::part(messageWrapper) {\n        margin-bottom: 16px; \n      }\n      ct-inbox-message::part(message) {\n        background-color: '.concat(t,"; \n        border: 1px solid ").concat(o,";\n        border-radius: 4px; \n        overflow: hidden;\n        min-height: 40px;\n      }\n      ct-inbox-message::part(message):hover {\n        box-shadow: 0px 4px 8px rgb(0 0 0 / 10%);\n        cursor: pointer;\n      }\n      ct-inbox-message::part(iconTitleDescWrapper) {\n        display: flex; \n        padding: 16px;\n      }\n      ct-inbox-message::part(titleDescWrapper) {\n        display: flex; \n        flex-direction: column;\n      }\n      ct-inbox-message::part(iconImgContainer) {\n        display: flex; \n        margin-right: 16px;\n      }\n      ct-inbox-message::part(mainImgContainer) {\n        line-height: 0;\n      }\n      ct-inbox-message::part(mainImg) {\n        width: 100%; \n        background: #b2b1ae;\n      }\n      ct-inbox-message::part(iconImg) {\n        height: 40px; \n        width: 40px;\n      }\n      ct-inbox-message::part(title) {\n        font-size: 14px !important; \n        line-height: 20px; \n        font-weight: 600; \n        color: ").concat(n,"\n      }\n      ct-inbox-message::part(description) {\n        font-size: 14px !important; \n        line-height: 20px; \n        font-weight: 400; \n        color: ").concat(r,"\n      }\n      ct-inbox-message::part(button) {\n        background-color: ").concat(l,"; \n        color: ").concat(c,"; \n        padding: 8px 16px; \n        font-size: 12px; \n        line-height: 16px; \n        font-weight: 600; \n        flex: 1; \n        border-radius: 0px; \n        text-transform: capitalize; \n        cursor: pointer; \n        border: none;\n      }\n      ct-inbox-message::part(buttonsContainer) {\n        display: flex;\n        position: relative;\n      }\n      ct-inbox-message::part(snackbar) {\n        position: absolute;\n        top: calc(-100% - 12px);\n        left: 50%;\n        transform: translate(-50%, 0px);\n        font-size: 14px;\n        font-weight: 400;\n        background: #FFFFFF;\n        border: 1px solid #ECEDF2;\n        box-shadow: 0px 4px 8px rgb(0 0 0 / 6%), 0px 0px 2px rgb(0 0 0 / 4%);\n        border-radius: 4px;\n        z-index: 2;\n        display: none;\n        width: max-content;\n        align-items: center;\n        padding: 8px 16px;\n        justify-content: center;\n      }\n\n      ct-inbox-message::part(snackbar-msg) {\n        color: black;\n        margin-left: 8px;\n      }\n\n      ct-inbox-message::part(timeStamp) {\n        display: flex; \n        justify-content: end; \n        align-items: center; \n        margin-top: 4px; \n        font-size: 12px !important; \n        line-height: 16px; \n        color: black;\n      }\n      ct-inbox-message::part(unreadMarker) {\n        height: 8px; \n        width: 8px; \n        border-radius: 50%; \n        background-color: ").concat(d,"; \n        margin-left: 8px;\n      }\n      @media only screen and (min-width: 420px) {\n        ct-inbox-message::part(mainImg) {\n          height: 180px;\n        }\n      }\n    </style>\n  ")},Si=e=>{let{panelBackgroundColor:t,panelBorderColor:o,headerBackgroundColor:n,headerTitleColor:r,closeIconColor:l,categoriesTabColor:c,categoriesTitleColor:d,categoriesBorderColor:h,selectedCategoryTabColor:f,selectedCategoryTitleColor:v,selectedCategoryBorderColor:m,headerCategoryHeight:y}=e;return'\n      <style id="webInboxStyles">\n        #inbox {\n          width: 100%;\n          position: fixed;\n          background-color: #fff; \n          display: none; \n          box-shadow: 0px 2px 10px 0px #d7d7d791;\n          background-color: '.concat(t,"; \n          border: 1px solid ").concat(o,";\n          top: 0;\n          left: 0;\n          height: 100%;\n          overflow: auto;\n          z-index: 1;\n          box-sizing: content-box;\n          border-radius: 4px;\n        }\n  \n        #emptyInboxMsg {\n          display: block;\n          padding: 10px;\n          text-align: center;\n          color: black;\n        }\n  \n        #header {\n          height: 36px; \n          width: 100%; \n          display: flex; \n          justify-content: center; \n          align-items: center; \n          background-color: ").concat(n,"; \n          background-color: var(--card-bg, ").concat(n,");\n          color: ").concat(r,"\n        }\n  \n        #closeInbox {\n          font-size: 20px; \n          margin-right: 12px; \n          color: ").concat(l,"; \n          cursor: pointer;\n        }\n  \n        #headerTitle {\n          font-size: 14px; \n          line-height: 20px; \n          flex-grow: 1; \n          font-weight: 700; \n          text-align: center;\n          flex-grow: 1;\n          text-align: center;\n        }\n  \n        #categoriesContainer {\n          padding: 16px 16px 0 16px; \n          height: 32px; \n          display: flex;\n          scroll-behavior: smooth;\n          position: relative;\n        }\n\n        #categoriesWrapper {\n          height: 32px; \n          overflow-x: scroll;\n          display: flex;\n          white-space: nowrap;\n          scrollbar-width: none;\n        }\n\n        #categoriesWrapper::-webkit-scrollbar {\n          display: none;\n        }\n  \n        #leftArrow, #rightArrow {\n          height: 32px;\n          align-items: center;\n          font-weight: 700;\n          position: absolute;\n          z-index: 2;\n          pointer-events: auto;\n          cursor: pointer;\n          display: none;\n        }\n\n        #leftArrow {\n          left: 0;\n          padding-left: 4px;\n          padding-right: 16px;\n          background: linear-gradient(90deg, ").concat(t," 0%, ").concat(t,"99 80%, ").concat(t,"0d 100%);\n        }\n\n        #rightArrow {\n          right: 0;\n          padding-right: 4px;\n          padding-left: 16px;\n          background: linear-gradient(-90deg, ").concat(t," 0%, ").concat(t,"99 80%, ").concat(t,'0d 100%);\n        }\n\n        [id^="category-"] {\n          display: flex; \n          flex: 1 1 0; \n          justify-content: center; \n          align-items: center; \n          font-size: 14px; \n          line-height: 20px; \n          background-color: ').concat(c,"; \n          color: ").concat(d,"; \n          cursor: pointer;\n          padding: 6px 24px;\n          margin: 0 3px;\n          border-radius: 16px;\n          border: ").concat(h?"1px solid "+h:"none",';\n        }\n\n        [id^="category-"][selected="true"] {\n          background-color: ').concat(f,"; \n          color: ").concat(v,"; \n          border: ").concat(m?"1px solid "+m:"none","\n        }\n  \n        #inboxCard {\n          padding: 0 16px 0 16px;\n          overflow-y: auto;\n          box-sizing: border-box;\n          margin-top: 16px;\n        }\n\n        @media only screen and (min-width: 480px) {\n          #inbox {\n            width: var(--inbox-width, 392px);\n            height: var(--inbox-height, 546px);\n            position: var(--inbox-position, fixed);\n            right: var(--inbox-right, unset);\n            bottom: var(--inbox-bottom, unset);\n            top: var(--inbox-top, unset);\n            left: var(--inbox-left, unset);\n          }\n  \n          #inboxCard {\n            height: calc(var(--inbox-height, 546px) - ").concat(y,"px); \n          }\n  \n        }\n      </style>\n      ")};class Ii extends HTMLElement{constructor(e){super(),this.isInboxOpen=!1,this.isInboxFromFlutter=!1,this.selectedCategory=null,this.unviewedMessages={},this.unviewedCounter=0,this.isPreview=!1,this.inboxConfigForPreview={},this.inboxSelector=null,this.inbox=null,this.emptyInboxMsg=null,this.inboxCard=null,this.unviewedBadge=null,this.observer=null,this.selectedCategoryRef=null,this.addClickListenerOnDocument=(()=>e=>{if(e.composedPath().includes(this.inbox)){const path=e.path||e.composedPath&&e.composedPath();if(path.length){const e=path[0].id;if("closeInbox"===e)this.toggleInbox();else if(e.startsWith("category-"))this.prevCategoryRef=this.selectedCategoryRef,this.selectedCategoryRef=path[0],this.updateActiveCategory(path[0].innerText);else{const e=path.filter((p=>{var e;return(null===(e=p.id)||void 0===e?void 0:e.startsWith("button-"))||"CT-INBOX-MESSAGE"===p.tagName}));e.length&&e[e.length-1].raiseClickedEvent(e[0],this.isPreview)}}}else(this.inboxSelector.contains(e.target)||this.isInboxOpen)&&(this.isInboxFromFlutter?this.isInboxFromFlutter=!1:this.toggleInbox(e))})(),this.setBadgeStyle=e=>{null!==this.unviewedBadge&&(this.unviewedBadge.innerText=e>9?"9+":e,this.unviewedBadge.style.display=e>0?"flex":"none")},this.logger=e,this.shadow=this.attachShadow({mode:"open"})}get incomingMessages(){return[]}set incomingMessages(e){void 0===e&&(e=[]),e.length>0&&this.inbox&&this.updateInboxMessages(e)}get incomingMessagesForPreview(){return[]}set incomingMessagesForPreview(e){void 0===e&&(e=[]);const t={};e.length>0&&this.inbox&&(this.isPreview=!0,this.unviewedCounter=0,e.forEach((e=>{const o="".concat(e.wzrk_id.split("_")[0],"_").concat(Date.now());e.id=o,t[o]=e,this.unviewedMessages[o]=e,this.unviewedCounter++})),this.buildUIForMessages(t),this.updateUnviewedBadgeCounter())}connectedCallback(){this.init()}init(){this.config=this.isPreview?this.inboxConfigForPreview:Be.readFromLSorCookie(fe)||{},0!==Object.keys(this.config).length&&(this.inboxSelector=document.getElementById(this.config.inboxSelector),null!==this.inboxSelector&&(this.config.styles.notificationsBadge?this.addUnviewedBadge():this.unviewedBadge&&this.unviewedBadge.remove(),this.createinbox(),document.removeEventListener("click",this.addClickListenerOnDocument),document.addEventListener("click",this.addClickListenerOnDocument),this.config.categories.length&&this.updateActiveCategory(this.selectedCategoryRef.innerText),this.shadow.innerHTML=this.getInboxStyles(),this.shadow.appendChild(this.inbox)))}addMsgsToInboxFromLS(){const e=this.deleteExpiredAndGetUnexpiredMsgs(!1),t=e?Object.keys(e):[];0!==t.length&&(t.forEach((t=>{e[t].viewed||(this.unviewedMessages[t]=e[t],this.unviewedCounter++)})),this.buildUIForMessages(e),this.updateUnviewedBadgeCounter())}deleteExpiredAndGetUnexpiredMsgs(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Ai();const o=Math.floor(Date.now()/1e3);for(const n in t)if(t[n].wzrk_ttl&&t[n].wzrk_ttl>0&&t[n].wzrk_ttl<o){if(e){const e=this.shadowRoot.getElementById(t[n].id);e&&e.remove(),t[n].viewed||(this.unviewedCounter--,this.updateUnviewedBadgeCounter())}delete t[n]}return t&&t.length>0&&(t=Object.values(t).sort(((a,b)=>b.date-a.date)).reduce(((e,t)=>(e[t.id]=t,e)),{})),Mi(t),t}updateInboxMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.deleteExpiredAndGetUnexpiredMsgs(),o=Date.now(),n={};e.forEach(((e,i)=>{const r="".concat(e.wzrk_id.split("_")[0],"_").concat(Date.now());e.id=r,e.date=o-i,e.viewed=0,t[r]=e,n[r]=e,this.unviewedMessages[r]=e,this.unviewedCounter++})),Mi(t),this.buildUIForMessages(n),this.updateUnviewedBadgeCounter()}createEl(e,t,o){const n=document.createElement(e);return n.setAttribute("id",t),n.setAttribute("part",o||t),n}addUnviewedBadge(){this.unviewedBadge||(this.unviewedBadge=this.createEl("div","unviewedBadge"),this.unviewedBadge.style.cssText="display: none; position: absolute; height: 16px; width: 26px; border-radius: 8px; background-color: ".concat(this.config.styles.notificationsBadge.backgroundColor,"; font-size: 12px; color: ").concat(this.config.styles.notificationsBadge.textColor,"; font-weight: bold; align-items: center; justify-content: center;"),document.body.appendChild(this.unviewedBadge)),this.updateUnviewedBadgePosition(),window.addEventListener("resize",(()=>{this.updateUnviewedBadgePosition()}))}updateUnviewedBadgePosition(){const{top:e,right:t}=this.inboxSelector.getBoundingClientRect();this.unviewedBadge.style.top="".concat(e-8,"px"),this.unviewedBadge.style.left="".concat(t-8,"px")}createinbox(){this.inbox=this.createEl("div","inbox");const header=this.createEl("div","header"),e=this.createEl("div","headerTitle");e.innerText=this.config.title;const t=this.createEl("div","closeInbox");if(t.innerHTML="&times",header.appendChild(e),header.appendChild(t),this.inbox.appendChild(header),this.config.categories.length){const e=this.createCategories();this.inbox.appendChild(e)}this.inboxCard=this.createEl("div","inboxCard"),this.inbox.appendChild(this.inboxCard),this.emptyInboxMsg=this.createEl("div","emptyInboxMsg"),this.emptyInboxMsg.innerText="All messages will be displayed here.",this.inboxCard.appendChild(this.emptyInboxMsg);const o={root:this.inboxCard,rootMargin:"0px",threshold:.5};this.observer=new IntersectionObserver(((e,t)=>{this.handleMessageViewed(e)}),o),this.addMsgsToInboxFromLS()}createCategories(){const e=this.createEl("div","categoriesContainer"),t=this.createEl("div","leftArrow");t.innerHTML=Ni,t.children[0].style="transform: rotate(180deg)",t.addEventListener("click",(()=>{this.shadowRoot.getElementById("categoriesWrapper").scrollBy(-70,0)})),e.appendChild(t);const o=this.createEl("div","categoriesWrapper");["All",...this.config.categories].forEach(((e,i)=>{const t=this.createEl("div","category-".concat(i),"category");t.innerText=e,0===i&&(this.selectedCategoryRef=t),o.appendChild(t)})),e.appendChild(o);const n=this.createEl("div","rightArrow");n.innerHTML=Ni,n.addEventListener("click",(()=>{this.shadowRoot.getElementById("categoriesWrapper").scrollBy(70,0)})),e.appendChild(n);const r={root:e,threshold:.9},l=o.children[0],c=o.children[this.config.categories.length];return new IntersectionObserver((e=>{this.categoryObserverCb(t,e[0].intersectionRatio>=.9)}),r).observe(l),new IntersectionObserver((e=>{this.categoryObserverCb(n,e[0].intersectionRatio>=.9)}),r).observe(c),e}categoryObserverCb(e,t){e&&(e.style.display=t?"none":"flex")}updateActiveCategory(e){this.selectedCategory=e,this.inboxCard.scrollTop=0;let t=0;this.prevCategoryRef&&this.prevCategoryRef.setAttribute("selected","false"),this.selectedCategoryRef.setAttribute("selected","true"),this.inboxCard.childNodes.forEach((e=>{"emptyInboxMsg"!==e.getAttribute("id")&&(e.style.display="All"===this.selectedCategory||e.getAttribute("category")===this.selectedCategory?"block":"none","block"===e.style.display&&t++)})),0===t?(this.emptyInboxMsg.innerText="".concat(e," messages will be displayed here."),this.emptyInboxMsg.style.display="block"):this.emptyInboxMsg.style.display="none"}buildUIForMessages(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isPreview&&this.updateTSForRenderedMsgs(),this.inboxCard.scrollTop=0;const o=null!==(e=this.config.maxMsgsInInbox)&&void 0!==e?e:be,n=this.inboxCard.firstChild,r=Object.values(t).sort(((a,b)=>b.date-a.date)).map((e=>e.id));for(const e of r){const o=new xi(this.config,t[e]);o.setAttribute("id",t[e].id),o.setAttribute("pivot",t[e].wzrk_pivot),o.setAttribute("part","ct-inbox-message"),this.config.categories.length>0?(o.setAttribute("category",t[e].tags[0]||""),o.style.display="All"===this.selectedCategory||t[e].category===this.selectedCategory?"block":"none"):o.style.display="block",this.inboxCard.insertBefore(o,n),this.observer.observe(o)}let l=this.inboxCard.querySelectorAll("ct-inbox-message").length;for(;l>o;){const e=this.inboxCard.querySelectorAll("ct-inbox-message");e.length>0&&e[e.length-1].remove(),l--}const c=this.inboxCard.querySelectorAll('ct-inbox-message[style*="display: block"]').length;this.emptyInboxMsg.style.display=c?"none":"block"}handleMessageViewed(e){const t=!this.isPreview;this.isInboxOpen&&e.forEach((e=>{e.isIntersecting&&this.unviewedMessages.hasOwnProperty(e.target.id)&&0===e.target.message.viewed&&(e.target.message.viewed=1,t?(window.clevertap.renderNotificationViewed({msgId:e.target.campaignId,pivotId:e.target.pivotId}),this.updateMessageInLS(e.target.id,{...e.target.message,viewed:1}),setTimeout((()=>{e.target.shadowRoot.getElementById("unreadMarker").style.display="none"}),1e3)):console.log("Notifiction viewed event will be raised at run time with payload ::",{msgId:e.target.campaignId,pivotId:e.target.pivotId}),this.unviewedCounter--,this.updateUnviewedBadgeCounter(),delete this.unviewedMessages[e.target.id])}))}updateMessageInLS(e,t){if(!this.isPreview){const o=Ai();o[e]=t,Mi(o)}}toggleInbox(e){this.isInboxOpen=!this.isInboxOpen,this.isInboxFromFlutter=!!(null==e?void 0:e.rect),this.isInboxOpen?(this.inboxCard.scrollTop=0,!this.isPreview&&this.deleteExpiredAndGetUnexpiredMsgs(),this.inbox.style.display="block",this.inbox.style.zIndex="2147483647",this.config.categories.length&&(this.selectedCategoryRef.setAttribute("selected","false"),this.selectedCategoryRef=this.shadowRoot.getElementById("category-0"),this.updateActiveCategory(this.selectedCategoryRef.innerText),this.shadowRoot.getElementById("categoriesWrapper").scrollLeft-=this.shadowRoot.getElementById("categoriesWrapper").scrollWidth),this.setInboxPosition(e)):this.inbox.style.display="none"}setInboxPosition(e){const t=window.outerWidth,o=getComputedStyle(Ne.inbox),n=o.getPropertyValue("--inbox-top"),r=o.getPropertyValue("--inbox-bottom"),l=o.getPropertyValue("--inbox-left"),c=o.getPropertyValue("--inbox-right");if(t>481&&!(n||r||l||c)){const t=ji(e,this.inbox.clientHeight,this.inbox.clientWidth),o=t.xPos,n=t.yPos;this.inbox.style.top=n+"px",this.inbox.style.left=o+"px"}}updateUnviewedBadgeCounter(){if(this.isPreview)return void this.setBadgeStyle(this.unviewedCounter);let e=0;this.inboxCard.querySelectorAll("ct-inbox-message").forEach((t=>{const o=Ai();o[t.id]&&0===o[t.id].viewed&&e++})),this.setBadgeStyle(e)}updateTSForRenderedMsgs(){this.inboxCard.querySelectorAll("ct-inbox-message").forEach((e=>{const t=e.id.split("_")[1];e.shadow.getElementById("timeStamp").firstChild.innerText=Di(t)}))}getInboxStyles(){const e=36,t=this.config.categories.length?64:16,o={panelBackgroundColor:this.config.styles.panelBackgroundColor,panelBorderColor:this.config.styles.panelBorderColor,headerBackgroundColor:this.config.styles.header.backgroundColor,headerTitleColor:this.config.styles.header.titleColor,closeIconColor:this.config.styles.closeIconColor,categoriesTabColor:this.config.styles.categories.tabColor,categoriesTitleColor:this.config.styles.categories.titleColor,selectedCategoryTabColor:this.config.styles.categories.selectedTab.tabColor,selectedCategoryTitleColor:this.config.styles.categories.selectedTab.titleColor,headerCategoryHeight:e+t};this.config.styles.categories.borderColor&&(o.categoriesBorderColor=this.config.styles.categories.borderColor),this.config.styles.categories.selectedTab.borderColor&&(o.selectedCategoryBorderColor=this.config.styles.categories.selectedTab.borderColor);const n=Si(o),r=this.config.styles.cards;return n+Pi({backgroundColor:r.backgroundColor,borderColor:r.borderColor,titleColor:r.titleColor,descriptionColor:r.descriptionColor,buttonColor:r.buttonColor,buttonTextColor:r.buttonTextColor,unreadMarkerColor:r.unreadMarkerColor})}}const Oi=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=Be.readFromLSorCookie(fe)||{};t?(Ne.inbox.inboxConfigForPreview=e,Ne.inbox.isPreview=!0,Ne.inbox&&Ne.inbox.init()):JSON.stringify(o)!==JSON.stringify(e)&&(Be.saveToLSorCookie(fe,e),Ne.inbox&&Ne.inbox.init())},_i=e=>{e.inbox_preview?Ne.inbox.incomingMessagesForPreview=e.inbox_notifs:Ne.inbox.incomingMessages=e},Ei=e=>{Ri(),Ne.inbox=new Ii({logger:e}),document.body.appendChild(Ne.inbox)},Li=e=>{const t=Be.readFromLSorCookie(ve)||{};if(Object.keys(t).length>0&&Object.keys(t)[0].includes("_")){const o={};return o[e]=t,Be.saveToLSorCookie(ve,o),o}return t},Ai=()=>{const e=JSON.parse(decodeURIComponent(Be.read(O)));if(!Ee(e))return{};const t=Li(e);return t.hasOwnProperty(e)?t[e]:{}},Mi=e=>{const t=JSON.parse(decodeURIComponent(Be.read(O)));if(!Ee(t))return;const o={...Li(t),[t]:e};Be.saveToLSorCookie(ve,o)},Ti=e=>new Promise(((t,o)=>{if("complete"===document.readyState)Ei(e),t();else{const o=Be.readFromLSorCookie(fe)||{},n=()=>{null===Ne.inbox&&Ei(e),t()};window.addEventListener("load",(()=>{if(document.getElementById(o.inboxSelector))n();else{let r=0;if(r<20){const l=setInterval((()=>{document.getElementById(o.inboxSelector)?(n(),clearInterval(l),t()):r>=20&&(clearInterval(l),e.debug("Failed to add inbox")),r++}),500)}}}))}})),Ri=()=>{void 0===customElements.get("ct-web-inbox")&&(customElements.define("ct-web-inbox",Ii),customElements.define("ct-inbox-message",xi))},ji=(e,t,o)=>{const n=document.scrollingElement.scrollLeft,r=document.scrollingElement.scrollTop,l=window.innerWidth+n,c=window.innerHeight+r,d=e.rect||e.target.getBoundingClientRect(),h=d.x+n,f=d.y+r,v=d.left+n,m=d.right+n,y=d.top+r,w=d.bottom,C=d.height,k={x:h+d.width/2,y:f+C/2},x=t/2,P=o/2;let S,I,O=!1;const _=16;if(w+t<=c){const e=c-(w+t);I=e>=_?w+_:w+e}else if(y-t>=r){const e=y-t;I=e>=_?y-t-_:y-t-e}else O=!0,I=k.y-x,I<r?I=r:I+t>c&&(I=c-t);if(O){const e=m+o;if(e<=l)S=m+(e+_<=l?_:l-e);else{const e=v-o;S=e-(e-_>=n?_:e-n)}}else S=k.x-P,S<n?S=v+o<=l?v:n:S+o>l&&(S=m-o>=n?m-o:l-o);return{xPos:S,yPos:I}},Di=e=>{const t=Date.now();let o=Math.floor((t-e)/6e4);return o<5?"Just now":o<60?"".concat(o," minute").concat(o>1?"s":""," ago"):(o=Math.floor(o/60),o<24?"".concat(o," hour").concat(o>1?"s":""," ago"):(o=Math.floor(o/24),"".concat(o," day").concat(o>1?"s":""," ago")))},Bi=()=>Object.keys(Be.readFromLSorCookie(fe)||{}).length>0,Ni='<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0.258435 9.74751C-0.0478584 9.44825 -0.081891 8.98373 0.156337 8.64775L0.258435 8.52836L3.87106 5L0.258435 1.47164C-0.0478588 1.17239 -0.0818914 0.707867 0.156337 0.371887L0.258435 0.252494C0.564728 -0.0467585 1.04018 -0.0800085 1.38407 0.152743L1.50627 0.252494L5.74156 4.39042C6.04786 4.68968 6.08189 5.1542 5.84366 5.49018L5.74156 5.60957L1.50627 9.74751C1.16169 10.0842 0.603015 10.0842 0.258435 9.74751Z" fill="#63698F"/>\n</svg>\n',zi='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8ZM9.6839 5.93602C9.97083 5.55698 10.503 5.48833 10.8725 5.78269C11.2135 6.0544 11.2968 6.54044 11.0819 6.91173L11.0219 7.00198L8.09831 10.864C7.80581 11.2504 7.26654 11.3086 6.90323 11.0122L6.82822 10.9433L5.04597 9.10191C4.71635 8.76136 4.71826 8.21117 5.05023 7.87303C5.35666 7.5609 5.83722 7.53855 6.16859 7.80482L6.24814 7.87739L7.35133 9.01717L9.6839 5.93602Z" fill="#03A387"/>\n</svg>\n',Fi=(e,t)=>{let{device:o,session:n,request:r,logger:l}=t;const c=o,d=n,h=r,f=l;let v=0;const m=t=>{const o=t.wzrk_id.split("_")[0],n=Me(),r=(e,t,o)=>{let n=0,r=0;null!=e[t]&&(n=e[t]),n++,null!=e.tc&&(r=e.tc),o<0&&r++,e.tc=r,e[t]=n};if(Be._isLocalStorageSupported()){delete sessionStorage[E];var l={};const e=Nt();l=3===t.display.wtarget_type&&e.hasOwnProperty("wi")?e.wi:0!==t.display.wtarget_type&&1!==t.display.wtarget_type||!e.hasOwnProperty("wp")?{}:e.wp,e.hasOwnProperty("global")&&(l.wp=e),null==t[z].wmc&&(t[z].wmc=1),null==t[z].wimc&&(t[z].wimc=1);var v=-1;let r=-1,c=-1,h=-1,f=-1,C=-1,k=-1;null!=t[z].efc&&(v=parseInt(t[z].efc,10)),null!=t[z].mdc&&(r=parseInt(t[z].mdc,10)),null!=t[z].tdc&&(c=parseInt(t[z].tdc,10)),null!=t[z].tlc&&(h=parseInt(t[z].tlc,10)),null!=t[z].wmp&&(f=parseInt(t[z].wmp,10)),null!=t[z].wmc&&(C=parseInt(t[z].wmc,10)),null!=t[z].wimc&&(k=parseInt(t[z].wimc,10));var m=l[d.sessionId];if(m){const e=m[o],n=m.tc;if("dnd"===e&&!Ne.dismissSpamControl)return!1;if(3===t[z].wtarget_type){if(k>0&&n>=k&&v<0)return!1}else if(C>0&&n>=C&&v<0)return!1;if(r>0&&e>=r)return!1}else m={},l[d.sessionId]=m;var y=l[n];if(null!=y){const e=y[o],t=y.tc;if(f>0&&t>=f&&v<0)return!1;if(c>0&&e>=c)return!1}else y={},l[n]=y;var w=l[N];if(null!=w){const e=w[o];if(h>0&&e>=h)return!1}else w={},l[N]=w}if(null!=t[z].delay&&t[z].delay>0){const o=t[z].delay;return t[z].delay=0,setTimeout(Fi,1e3*o,e,{device:c,session:d,request:h,logger:f}),!1}r(m,o,v),r(y,o,v),r(w,o,v);let C="wp";3===t[z].wtarget_type&&(C="wi");const k={};k[d.sessionId]=m,k[n]=y,k[N]=w,zt({[C]:k})},y=()=>{const e=c.getGuid(),t=d.getSessionCookieObject();return"&t=wc&d="+encodeURIComponent(_t(e+"|"+t.p+"|"+t.s))},w=(e,t,o,n,r)=>{if(""!==e&&null!=e){let l,c;r?l=o:null!==o&&(c=o.getElementsByClassName("jsCT_CTA"),null!=c&&1===c.length&&(l=c[0]));const h=t.display.jsFunc,f=t.display.preview;null==f&&(e+=y()),null!=l&&(l.onclick=()=>{if(null!=h)return null==f&&Tt.fireRequest(e),C(h,t),void Ht("-1",n,d.sessionId);1===t.display.window?window.open(e,"_blank"):window.location=e})}},C=(e,t)=>{const o=window.parent[e];"function"==typeof o&&(null!=t.display.kv?o(t.display.kv):o())},k=(e,t,o,n,r)=>{x(t),w(e,t,o,n,r)},x=e=>{const data={type:"event"};data.evtName=re,data.evtData={[ne]:e.wzrk_id},e.wzrk_pivot&&(data.evtData={...data.evtData,wzrk_pivot:e.wzrk_pivot}),h.processEvent(data)},P=e=>{var t;void 0===customElements.get("ct-web-personalisation-banner")&&customElements.define("ct-web-personalisation-banner",wi);const o=null!==(t=e.display.divId)&&void 0!==t?t:e.display.divSelector,n=document.createElement("ct-web-personalisation-banner");n.msgId=e.wzrk_id,n.pivotId=e.wzrk_pivot,n.divHeight=e.display.divHeight,n.details=e.display.details[0];const r=e.display.divId?document.getElementById(o):document.querySelector(o);r.innerHTML="",r.appendChild(n)},S=e=>{var t;void 0===customElements.get("ct-web-personalisation-carousel")&&customElements.define("ct-web-personalisation-carousel",Ci);const o=null!==(t=e.display.divId)&&void 0!==t?t:e.display.divSelector,n=document.createElement("ct-web-personalisation-carousel");n.target=e;const r=e.display.divId?document.getElementById(o):document.querySelector(o);r.innerHTML="",r.appendChild(n)},I=e=>{const t="wzrkImageOnlyDiv",o=document.createElement("ct-web-popup-imageonly");o.session=d,o.target=e;const n=document.getElementById(t);n.innerHTML="",n.style.visibility="hidden",n.appendChild(o)},_=e=>{const t=e.wzrk_id.split("_")[0],o=e.display;if(2===o.wtarget_type&&1===e.msgContent.type){const t={};t.msgId=e.wzrk_id,e.wzrk_pivot&&(t.pivotId=e.wzrk_pivot),null!=e.msgContent.kv&&(t.kv=e.msgContent.kv);const o=new CustomEvent("CT_web_native_display",{detail:t});return void document.dispatchEvent(o)}if(1===o.layout)return D(void 0,e);if(3===o.layout){const t="wzrkImageOnlyDiv";if(!1===m(e))return;if(Ne.dismissSpamControl&&null!=document.getElementById(t)&&document.getElementById(t).remove(),null!=document.getElementById(t)||null!=document.getElementById("intentPreview"))return;const o=document.createElement("div");return o.id=t,document.body.appendChild(o),void 0===customElements.get("ct-web-popup-imageonly")&&customElements.define("ct-web-popup-imageonly",ki),I(e)}if(!1===m(e))return;const n="wizParDiv"+o.layout;if(Ne.dismissSpamControl&&null!=document.getElementById(n)&&document.getElementById(n).remove(),null!=document.getElementById(n))return;Ne.campaignDivMap[t]=n;const r=2===o.layout,l=document.createElement("div");l.id=n;const c=window.innerHeight,d=window.innerWidth;let h=!1;if(r)l.setAttribute("style",o.iFrameStyle);else{var f=10;let e=5*d/100,t=f+5*c/100,n=30*d/100+20,r="width:30%;";(/mobile/i.test(navigator.userAgent)||/mini/i.test(navigator.userAgent))&&!1===/iPad/i.test(navigator.userAgent)?(n=85*d/100+20,e=5*d/100,t=5*c/100,r="width:80%;"):("ontouchstart"in window||/tablet/i.test(navigator.userAgent))&&(n=50*d/100+20,e=5*d/100,t=5*c/100,r="width:50%;"),null==o.proto?(h=!0,l.setAttribute("style","display:block;overflow:hidden; bottom:"+t+"px !important;width:"+n+"px !important;right:"+e+"px !important;position:fixed;z-index:2147483647;")):l.setAttribute("style",r+o.iFrameStyle)}document.body.appendChild(l);const iframe=document.createElement("iframe"),v=!1===o.br?"0":"8";iframe.frameborder="0px",iframe.marginheight="0px",iframe.marginwidth="0px",iframe.scrolling="no",iframe.id="wiz-iframe";const y=e.display.onClick;let html,w="";if(""!==y&&null!=y&&(w="cursor:pointer;"),1===e.msgContent.type)html=e.msgContent.html,html=html.replace(/##campaignId##/g,t),html=html.replace(/##campaignId_batchId##/g,e.wzrk_id);else{const o='<style type="text/css">body{margin:0;padding:0;}#contentDiv.wzrk{overflow:hidden;padding:0;text-align:center;'+w+"}#contentDiv.wzrk td{padding:15px 10px;}.wzrkPPtitle{font-weight: bold;font-size: 16px;font-family:arial;padding-bottom:10px;word-break: break-word;}.wzrkPPdscr{font-size: 14px;font-family:arial;line-height:16px;word-break: break-word;display:inline-block;}.PL15{padding-left:15px;}.wzrkPPwarp{margin:20px 20px 0 5px;padding:0px;border-radius: "+v+"px;box-shadow: 1px 1px 5px #888888;}a.wzrkClose{cursor:pointer;position: absolute;top: 11px;right: 11px;z-index: 2147483647;font-size:19px;font-family:arial;font-weight:bold;text-decoration: none;width: 25px;/*height: 25px;*/text-align: center; -webkit-appearance: none; line-height: 25px;background: #353535;border: #fff 2px solid;border-radius: 100%;box-shadow: #777 2px 2px 2px;color:#fff;}a:hover.wzrkClose{background-color:#d1914a !important;color:#fff !important; -webkit-appearance: none;}td{vertical-align:top;}td.imgTd{border-top-left-radius:8px;border-bottom-left-radius:8px;}</style>";let r,l,c,d,h;"dark"===e.display.theme?(r="#2d2d2e",l="#eaeaea",c="#353535",d="#353535",h="#ffffff"):(r="#ffffff",l="#000000",d="#f4f4f4",c="#a5a6a6",h="#ffffff");const f=e.msgContent.title,m=e.msgContent.description;let y="";null!=e.msgContent.imageUrl&&""!==e.msgContent.imageUrl&&(y="<td class='imgTd' style='background-color:"+d+"'><img src='"+e.msgContent.imageUrl+"' height='60' width='60'></td>"),html=o+"<div class='wzrkPPwarp' style='color:"+l+";background-color:"+r+";'><a href='javascript:void(0);' onclick=parent.$WZRK_WR.closeIframe("+t+",'"+n+"'); class='wzrkClose' style='background-color:"+c+";color:"+h+"'>&times;</a><div id='contentDiv' class='wzrk'><table cellpadding='0' cellspacing='0' border='0'><tr>"+y+"<td style='vertical-align:top;'><div class='wzrkPPtitle' style='color:"+l+"'>"+f+"</div><div class='wzrkPPdscr' style='color:"+l+"'>"+m+"<div></td></tr></table></div>"}iframe.setAttribute("style","z-index: 2147483647; display:block; width: 100% !important; border:0px !important; border-color:none !important;"),l.appendChild(iframe);const C=(iframe.contentWindow?iframe.contentWindow:iframe.contentDocument.document?iframe.contentDocument.document:iframe.contentDocument).document,x=new Event("CT_campaign_rendered");document.dispatchEvent(x),C.open(),C.write(html),o["custom-editor"]&&A(e,C),C.close();const P=()=>{f=document.getElementById("wiz-iframe").contentDocument.getElementById("contentDiv").scrollHeight,!0===o["custom-editor"]||r||(f+=25),document.getElementById("wiz-iframe").contentDocument.body.style.margin="0px",document.getElementById("wiz-iframe").style.height=f+"px"},S=navigator.userAgent.toLowerCase();if(-1!==S.indexOf("safari"))if(S.indexOf("chrome")>-1)iframe.onload=()=>{P();const t=document.getElementById("wiz-iframe").contentDocument.getElementById("contentDiv");k(y,e,t,n,h)};else{let t=iframe.contentDocument||iframe.contentWindow;t.document&&(t=t.document),P();const o=setInterval((()=>{if("complete"===t.readyState){clearInterval(o),P();const t=document.getElementById("wiz-iframe").contentDocument.getElementById("contentDiv");k(y,e,t,n,h)}}),10)}else iframe.onload=()=>{P();const t=document.getElementById("wiz-iframe").contentDocument.getElementById("contentDiv");k(y,e,t,n,h)}},A=(e,t)=>{const script=t.createElement("script");script.innerHTML="\n      const ct__camapignId = '".concat(e.wzrk_id,"';\n      const ct__formatVal = (v) => {\n          return v && v.trim().substring(0, 20);\n      }\n      const ct__parentOrigin =  window.parent.origin;\n      document.body.addEventListener('click', (event) => {\n        const elem = event.target.closest?.('a[wzrk_c2a], button[wzrk_c2a]');\n        if (elem) {\n            const {innerText, id, name, value, href} = elem;\n            const clickAttr = elem.getAttribute('onclick') || elem.getAttribute('click');\n            const onclickURL = clickAttr?.match(/(window.open)[(](\"|')(.*)(\"|',)/)?.[3] || clickAttr?.match(/(location.href *= *)(\"|')(.*)(\"|')/)?.[3];\n            const props = {innerText, id, name, value};\n            let msgCTkv = Object.keys(props).reduce((acc, c) => {\n                const formattedVal = ct__formatVal(props[c]);\n                formattedVal && (acc['wzrk_click_' + c] = formattedVal);\n                return acc;\n            }, {});\n            if(onclickURL) { msgCTkv['wzrk_click_' + 'url'] = onclickURL; }\n            if(href) { msgCTkv['wzrk_click_' + 'c2a'] = href; }\n            const notifData = { msgId: ct__camapignId, msgCTkv, pivotId: '").concat(e.wzrk_pivot,"' };\n            window.parent.clevertap.renderNotificationClicked(notifData);\n        }\n      });\n    "),t.body.appendChild(script)};let M=!1;const R=e=>{let t=e.display.onClick;if(window.clevertap.hasOwnProperty("notificationCallback")&&void 0!==window.clevertap.notificationCallback&&"function"==typeof window.clevertap.notificationCallback){const o=window.clevertap.notificationCallback;if(!M){const n={};n.msgContent=e.msgContent,n.msgId=e.wzrk_id,e.wzrk_pivot&&(n.pivotId=e.wzrk_pivot),null!=e.display.kv&&(n.kv=e.display.kv),window.clevertap.raiseNotificationClicked=()=>{if(""!==t&&null!=t){const o=e.display.jsFunc;if(t+=y(),null!=o)return Tt.fireRequest(t),void C(o,e);1===e.display.window?window.open(t,"_blank"):window.location=t}},window.clevertap.raiseNotificationViewed=()=>{x(e)},o(n),M=!0}}else if(window.clevertap.popupCurrentWzrkId=e.wzrk_id,_(e),window.clevertap.hasOwnProperty("popupCallbacks")&&void 0!==window.clevertap.popupCallbacks&&"function"==typeof window.clevertap.popupCallbacks[e.wzrk_id]){const t=window.clevertap.popupCallbacks[e.wzrk_id],r={};r.msgContent=e.msgContent,r.msgId=e.wzrk_id,e.wzrk_pivot&&(r.pivotId=e.wzrk_pivot);var o=[];for(var n in e)if(n.startsWith(oe)&&n!==ne){const t={[n]:e[n]};o.push(t)}o.length>0&&(r.msgCTkv=o),null!=e.display.kv&&(r.kv=e.display.kv),window.clevertap.raisePopupNotificationClicked=t=>{if(!t||!t.msgId)return;const o={type:"event"};if(o.evtName=se,o.evtData={[ne]:t.msgId},e.wzrk_pivot&&(o.evtData={...o.evtData,wzrk_pivot:t.pivotId}),t.msgCTkv)for(var n of t.msgCTkv)o.evtData={...o.evtData,...n};h.processEvent(o)},t(r)}};let j;const D=(e,t)=>{let o;if(null!=e&&e.clientY>0)return;if(o=null==t?j:t,Ne.dismissSpamControl&&0===o.display.wtarget_type&&null!=document.getElementById("intentPreview")&&null!=document.getElementById("intentOpacityDiv")&&(document.getElementById("intentPreview").remove(),document.getElementById("intentOpacityDiv").remove()),null!=document.getElementById("intentPreview")||null!=document.getElementById("wzrkImageOnlyDiv"))return;if(null==o.display.layout&&(/mobile/i.test(navigator.userAgent)||/mini/i.test(navigator.userAgent)||/iPad/i.test(navigator.userAgent)||"ontouchstart"in window||/tablet/i.test(navigator.userAgent)))return;if(!1===m(o))return;const n=o.wzrk_id.split("_")[0];Ne.campaignDivMap[n]="intentPreview";let r=!1;const l=document.createElement("div");l.id="intentOpacityDiv";const c=o.display.opacity||.7,d="rgba(0,0,0,".concat(c,")");l.setAttribute("style","position: fixed;top: 0;bottom: 0;left: 0;width: 100%;height: 100%;z-index: 2147483646;background: ".concat(d,";")),document.body.appendChild(l);const h=document.createElement("div");h.id="intentPreview",null==o.display.proto?(r=!0,h.setAttribute("style","display:block;overflow:hidden;top:55% !important;left:50% !important;position:fixed;z-index:2147483647;width:600px !important;height:600px !important;margin:-300px 0 0 -300px !important;")):h.setAttribute("style",o.display.iFrameStyle),document.body.appendChild(h);const iframe=document.createElement("iframe"),f=!1===o.display.br?"0":"8";iframe.frameborder="0px",iframe.marginheight="0px",iframe.marginwidth="0px",iframe.scrolling="no",iframe.id="wiz-iframe-intent";const v=o.display.onClick;let html,y="";if(""!==v&&null!=v&&(y="cursor:pointer;"),1===o.msgContent.type)html=o.msgContent.html,html=html.replace(/##campaignId##/g,n),html=html.replace(/##campaignId_batchId##/g,o.wzrk_id);else{const e='<style type="text/css">body{margin:0;padding:0;}#contentDiv.wzrk{overflow:hidden;padding:0 0 20px 0;text-align:center;'+y+"}#contentDiv.wzrk td{padding:15px 10px;}.wzrkPPtitle{font-weight: bold;font-size: 24px;font-family:arial;word-break: break-word;padding-top:20px;}.wzrkPPdscr{font-size: 14px;font-family:arial;line-height:16px;word-break: break-word;display:inline-block;padding:20px 20px 0 20px;line-height:20px;}.PL15{padding-left:15px;}.wzrkPPwarp{margin:20px 20px 0 5px;padding:0px;border-radius: "+f+"px;box-shadow: 1px 1px 5px #888888;}a.wzrkClose{cursor:pointer;position: absolute;top: 11px;right: 11px;z-index: 2147483647;font-size:19px;font-family:arial;font-weight:bold;text-decoration: none;width: 25px;/*height: 25px;*/text-align: center; -webkit-appearance: none; line-height: 25px;background: #353535;border: #fff 2px solid;border-radius: 100%;box-shadow: #777 2px 2px 2px;color:#fff;}a:hover.wzrkClose{background-color:#d1914a !important;color:#fff !important; -webkit-appearance: none;}#contentDiv .button{padding-top:20px;}#contentDiv .button a{font-size: 14px;font-weight:bold;font-family:arial;text-align:center;display:inline-block;text-decoration:none;padding:0 30px;height:40px;line-height:40px;background:#ea693b;color:#fff;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;}</style>";let t,r,l,c;"dark"===o.display.theme?(t="#2d2d2e",r="#eaeaea",l="#353535",c="#ffffff"):(t="#ffffff",r="#000000",l="#a5a6a6",c="#ffffff");const d=o.msgContent.title,h=o.msgContent.description;let v="";null!=o.msgContent.ctaText&&""!==o.msgContent.ctaText&&(v="<div class='button'><a href='#'>"+o.msgContent.ctaText+"</a></div>");let m="";null!=o.msgContent.imageUrl&&""!==o.msgContent.imageUrl&&(m="<div style='padding-top:20px;'><img src='"+o.msgContent.imageUrl+"' width='500' alt="+d+" /></div>"),html=e+"<div class='wzrkPPwarp' style='color:"+r+";background-color:"+t+";'><a href='javascript:void(0);' onclick=parent.$WZRK_WR.closeIframe("+n+",'intentPreview'); class='wzrkClose' style='background-color:"+l+";color:"+c+"'>&times;</a><div id='contentDiv' class='wzrk'><div class='wzrkPPtitle' style='color:"+r+"'>"+d+"</div><div class='wzrkPPdscr' style='color:"+r+"'>"+h+"</div>"+m+v+"</div></div>"}iframe.setAttribute("style","z-index: 2147483647; display:block; height: 100% !important; width: 100% !important;min-height:80px !important;border:0px !important; border-color:none !important;"),h.appendChild(iframe);const w=(iframe.contentWindow?iframe.contentWindow:iframe.contentDocument.document?iframe.contentDocument.document:iframe.contentDocument).document,C=new Event("CT_campaign_rendered");document.dispatchEvent(C),w.open(),w.write(html),o.display["custom-editor"]&&A(o,w),w.close();const x=document.getElementById("wiz-iframe-intent").contentDocument.getElementById("contentDiv");k(v,o,x,"intentPreview",r)};if(!document.body)return void(v<6&&(v++,setTimeout(Fi,1e3,e,{device:c,session:d,request:h,logger:f})));const B=e=>{Object.keys(e).map((t=>{var o,n;e[t].display.divId?(o=e[t].display.divId,n=document.getElementById(o)):(o=e[t].display.divSelector,n=document.querySelector(o)),null!==n&&(2===e[t].msgContent.type?P(e[t]):S(e[t]),delete e[t])}))},F=e=>{window.addEventListener("load",(()=>{let t=0;if(t<20){const o=setInterval((()=>{B(e),0!==Object.keys(e).length&&20!==t||(clearInterval(o),e={}),t++}),500)}}))};if(null!=e.inapp_notifs){const t={};for(let o=0;o<e.inapp_notifs.length;o++){const n=e.inapp_notifs[o];null==n.display.wtarget_type||0===n.display.wtarget_type?R(n):1===n.display.wtarget_type?(j=n,window.document.body.onmouseleave=D):2===n.display.wtarget_type&&(2===n.msgContent.type||3===n.msgContent.type?null!==(n.display.divId?document.getElementById(n.display.divId):document.querySelector(n.display.divSelector))?2===n.msgContent.type?P(n):S(n):t[n.wzrk_id.split("_")[0]]=n:R(n))}Object.keys(t).length&&("complete"===document.readyState?B(t):F(t))}const U=e=>{if(null!=Ne.globalEventsMap||(Ne.globalEventsMap=Be.readFromLSorCookie(T),null!=Ne.globalEventsMap)){for(const t in e)if(e.hasOwnProperty(t)){const o=Ne.globalEventsMap[t],n=e[t];null!=Ne.globalEventsMap[t]?null!=n[0]&&n[0]>o[0]&&(Ne.globalEventsMap[t]=n):Ne.globalEventsMap[t]=n}}else Ne.globalEventsMap=e},V=()=>{if(e.inbox_preview)_i(e);else if(e.inbox_notifs){const t=[];for(let o=0;o<e.inbox_notifs.length;o++)!1!==m(e.inbox_notifs[o])&&t.push(e.inbox_notifs[o]);_i(t)}};if((e.webInboxSetting||null!=e.inbox_notifs)&&(Bi()&&Ri(),null===Ne.inbox?(e.webInboxSetting&&Oi(e.webInboxSetting),Ti(f).then((()=>{V()})).catch((e=>{}))):V()),e.vars)return void Ne.variableStore.mergeVariables(e.vars);const W=(e,t)=>{const o=Nt(),n=o[t].global;if(null!=n&&t)for(const o in e)if(e.hasOwnProperty(o)&&(delete n[e[o]],Be.read(L))){const n=JSON.parse(decodeURIComponent(Be.read(L))),r=JSON.parse(decodeURIComponent(Be.read(O)));n[r]&&n[r][t]&&n[r][t][e[o]]&&(delete n[r][t][e[o]],Be.save(L,encodeURIComponent(JSON.stringify(n))))}zt(o)};if(Be._isLocalStorageSupported())try{if(null!=e.evpr){const t=e.evpr.events,o=e.evpr.profile,n=e.evpr.expires_in,r=Te();Be.setMetaProp("lsTime",r),Be.setMetaProp("exTs",n),U(t),Be.saveToLSorCookie(T,Ne.globalEventsMap),null==Ne.globalProfileMap?Gt(o,!0):Gt(o,!1)}null!=e.arp&&Kt(e.arp),null!=e.inapp_stale&&e.inapp_stale.length>0&&W(e.inapp_stale,"wp"),null!=e.inbox_stale&&e.inbox_stale.length>0&&W(e.inbox_stale,"wi")}catch(e){f.error("Unable to persist evrp/arp: "+e)}};var Ui=n("isPersonalisationActive");class qi{constructor(e){let{isPersonalisationActive:t}=e;Object.defineProperty(this,Ui,{writable:!0,value:void 0}),r(this,Ui)[Ui]=t}getTotalVisits(){if(!r(this,Ui)[Ui]())return;let e=Be.getMetaProp("sc");return null==e&&(e=1),e}getLastVisit(){if(!r(this,Ui)[Ui]())return;const e=Be.getMetaProp("ps");return null!=e?new Date(1e3*e):void 0}}const Vi={DISABLE:0,ERROR:1,INFO:2,DEBUG:3,DEBUG_PE:4};var Wi=n("logLevel"),Gi=n("log"),Hi=n("isLegacyDebug");class Ki{constructor(e){Object.defineProperty(this,Hi,{get:Zi,set:void 0}),Object.defineProperty(this,Gi,{value:Ji}),Object.defineProperty(this,Wi,{writable:!0,value:void 0}),this.wzrkError={},r(this,Wi)[Wi]=null==e?e:Vi.INFO,this.wzrkError={}}get logLevel(){return r(this,Wi)[Wi]}set logLevel(e){r(this,Wi)[Wi]=e}error(e){r(this,Wi)[Wi]>=Vi.ERROR&&r(this,Gi)[Gi]("error",e)}info(e){r(this,Wi)[Wi]>=Vi.INFO&&r(this,Gi)[Gi]("log",e)}debug(e){(r(this,Wi)[Wi]>=Vi.DEBUG||r(this,Hi)[Hi])&&r(this,Gi)[Gi]("debug",e)}debugPE(e){r(this,Wi)[Wi]>=Vi.DEBUG_PE&&r(this,Gi)[Gi]("debug_pe",e)}reportError(code,e){this.wzrkError.c=code,this.wzrkError.d=e,this.error("".concat(Ye," ").concat(code,": ").concat(e))}}var Ji=function(e,t){if(window.console)try{const o=(new Date).getTime();console[e]("CleverTap [".concat(o,"]: ").concat(t))}catch(e){}},Zi=function(){return"undefined"!=typeof sessionStorage&&""===sessionStorage.WZRK_D},$i=n("logger"),Yi=n("sessionId"),Qi=n("isPersonalisationActive");class Xi{constructor(e){let{logger:t,isPersonalisationActive:o}=e;Object.defineProperty(this,$i,{writable:!0,value:void 0}),Object.defineProperty(this,Yi,{writable:!0,value:void 0}),Object.defineProperty(this,Qi,{writable:!0,value:void 0}),this.cookieName=void 0,this.scookieObj=void 0,this.sessionId=Be.getMetaProp("cs"),r(this,$i)[$i]=t,r(this,Qi)[Qi]=o}get sessionId(){return r(this,Yi)[Yi]}set sessionId(e){r(this,Yi)[Yi]=e}getSessionCookieObject(){let e=Be.readCookie(this.cookieName),t={};if(null!=e)if(e=e.replace(x,'"'),t=JSON.parse(e),Pe(t)){if(void 0!==t.t){const e=t.t;Te()-e>M+60&&(t={})}}else t={};return this.scookieObj=t,t}setSessionCookieObject(e){const t=JSON.stringify(e);Be.createBroadCookie(this.cookieName,t,M,xt())}manageSession(e){if(void 0===this.sessionId||this.sessionId!==e){const t=Be.getMetaProp("cs");if(void 0===t)Be.setMetaProp("ps",e),Be.setMetaProp("cs",e),Be.setMetaProp("sc",1);else if(t!==e){Be.setMetaProp("ps",t),Be.setMetaProp("cs",e);let o=Be.getMetaProp("sc");void 0===o&&(o=0),Be.setMetaProp("sc",o+1)}this.sessionId=e}}getTimeElapsed(){if(!r(this,Qi)[Qi]())return;null!=this.scookieObj&&(this.scookieObj=this.getSessionCookieObject());const e=this.scookieObj.s;if(null!=e){const t=Te();return Math.floor(t-e)}}getPageCount(){if(r(this,Qi)[Qi]())return null!=this.scookieObj&&(this.scookieObj=this.getSessionCookieObject()),this.scookieObj.p}}let eo=0,to=0;var io=n("logger"),oo=n("account"),no=n("device"),ro=n("session"),so=n("isPersonalisationActive"),ao=n("clearCookie"),lo=n("addToLocalEventMap");class co{constructor(e){let{logger:t,account:o,device:n,session:l,isPersonalisationActive:c}=e;Object.defineProperty(this,lo,{value:ho}),Object.defineProperty(this,io,{writable:!0,value:void 0}),Object.defineProperty(this,oo,{writable:!0,value:void 0}),Object.defineProperty(this,no,{writable:!0,value:void 0}),Object.defineProperty(this,ro,{writable:!0,value:void 0}),Object.defineProperty(this,so,{writable:!0,value:void 0}),Object.defineProperty(this,ao,{writable:!0,value:!1}),this.processingBackup=!1,r(this,io)[io]=t,r(this,oo)[oo]=o,r(this,no)[no]=n,r(this,ro)[ro]=l,r(this,so)[so]=c,Tt.logger=t,Tt.device=n,Tt.account=o}processBackupEvents(){const e=Be.readFromLSorCookie(B);if(null!=e){this.processingBackup=!0;for(const t in e)if(e.hasOwnProperty(t)){const o=e[t];void 0===o.fired&&(r(this,io)[io].debug("Processing backup event : "+o.q),void 0!==o.q&&Tt.fireRequest(o.q),o.fired=!0)}Be.saveToLSorCookie(B,e),this.processingBackup=!1}}addSystemDataToObject(e,t){void 0===t&&(e=Le(e,r(this,io)[io])),Ie(r(this,io)[io].wzrkError)||(e.wzrk_error=r(this,io)[io].wzrkError,r(this,io)[io].wzrkError={}),e.id=r(this,oo)[oo].id,Ee(r(this,no)[no].gcookie)&&(e.g=r(this,no)[no].gcookie);const o=r(this,ro)[ro].getSessionCookieObject();e.s=o.s,e.pg=void 0===o.p?1:o.p;let n=document.location.protocol;return n=n.replace(":",""),e.af={lib:"web-sdk-v1.7.0",protocol:n,...Ne.flutterVersion},sessionStorage.hasOwnProperty("WZRK_D")&&(e.debug=!0),e}addFlags(data){if(r(this,ao)[ao]=Be.getAndClearMetaProp(P),void 0!==r(this,ao)[ao]&&r(this,ao)[ao]&&(data.rc=!0,r(this,io)[io].debug("reset cookie sent in request and cleared from meta for future requests.")),r(this,so)[so]()){const e=Be.getMetaProp("lsTime"),t=Be.getMetaProp("exTs");if(void 0===e||void 0===t)return void(data.dsync=!0);e+t<Te()&&(data.dsync=!0)}}saveAndFireRequest(e,t,o,n){const l=Te(),data=(e=kt(e,"rn",++Ne.globalCache.REQ_N))+"&i="+l+"&sn="+eo;Be.backupEvent(data,Ne.globalCache.REQ_N,r(this,io)[io]),Ne.offline||(t&&(void 0===r(this,ao)[ao]||!r(this,ao)[ao])||window.isOULInProgress?r(this,io)[io].debug("Not fired due to override - ".concat(Ne.blockRequest," or clearCookie - ").concat(r(this,ao)[ao]," or OUL request in progress - ").concat(window.isOULInProgress)):(l===to?eo++:(to=l,eo=0),window.oulReqN=Ne.globalCache.REQ_N,Tt.fireRequest(data,!1,o,n)))}unregisterTokenForGuid(e){const t=Be.readFromLSorCookie(le);if(t){const data={type:"data"};Ee(e)&&(data.g=e),data.action="unregister",data.id=r(this,oo)[oo].id;const t=r(this,ro)[ro].getSessionCookieObject();data.s=t.s;const o=St(JSON.stringify(data),r(this,io)[io]);let n=r(this,oo)[oo].dataPostURL;n=kt(n,"type","data"),n=kt(n,"d",o),Tt.fireRequest(n,!0),Be.saveToLSorCookie(ae,!1)}this.registerToken(t)}registerToken(e){if(!e)return;e=this.addSystemDataToObject(e,!0),e=JSON.stringify(e);let t=r(this,oo)[oo].dataPostURL;t=kt(t,"type","data"),t=kt(t,"d",St(e,r(this,io)[io])),Tt.fireRequest(t),Be.save(F,"ok")}processEvent(data){r(this,lo)[lo](data.evtName),data=this.addSystemDataToObject(data,void 0),this.addFlags(data),data[E]=Ut();const e=St(JSON.stringify(data),r(this,io)[io]);let t=r(this,oo)[oo].dataPostURL;t=kt(t,"type",Z),t=kt(t,"d",e),this.saveAndFireRequest(t,Ne.blockRequest,!1,data.evtName)}async post(e,body){try{const t=await fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:body});if(t.ok){const data=await t.json();return r(this,io)[io].debug("Sync data successful",data),data}throw t}catch(e){throw r(this,io)[io].debug("Error in syncing variables",e),e}}}var ho=function(e){if(Be._isLocalStorageSupported()){void 0===Ne.globalEventsMap&&(Ne.globalEventsMap=Be.readFromLSorCookie(T),void 0===Ne.globalEventsMap&&(Ne.globalEventsMap={}));const t=Te();let o=Ne.globalEventsMap[e];void 0!==o?(o[2]=t,o[0]++):(o=[],o.push(1),o.push(t),o.push(t)),Ne.globalEventsMap[e]=o,Be.saveToLSorCookie(T,Ne.globalEventsMap)}},uo=n("request"),po=n("account"),go=n("oldValues"),fo=n("logger"),vo=n("processPrivacyArray");class bo extends Array{constructor(e,t){let{request:o,account:n,logger:l}=e;super(),Object.defineProperty(this,vo,{value:mo}),Object.defineProperty(this,uo,{writable:!0,value:void 0}),Object.defineProperty(this,po,{writable:!0,value:void 0}),Object.defineProperty(this,go,{writable:!0,value:void 0}),Object.defineProperty(this,fo,{writable:!0,value:void 0}),r(this,fo)[fo]=l,r(this,uo)[uo]=o,r(this,po)[po]=n,r(this,go)[go]=t}push(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Ne.isPrivacyArrPushed?r(this,vo)[vo](Ne.privacyArray.length>0?Ne.privacyArray:t):Ne.privacyArray.push(...t),0}_processOldValues(){r(this,go)[go]&&r(this,vo)[vo](r(this,go)[go]),r(this,go)[go]=null}}var mo=function(e){if(Array.isArray(e)&&e.length>0){const o=e.reduce(((e,t)=>({...e,...t})),{});let data={};const n={};var t=!1;if(o.hasOwnProperty(U)&&"boolean"==typeof(t=o[U])&&(n[V]=t,Ne.isOptInRequest=!t),o.hasOwnProperty(G)){const e=o[G],t="boolean"==typeof e&&e;Be.setMetaProp(G,t)}if(!Ie(n)){data.type="profile",data.profile=n,data=r(this,uo)[uo].addSystemDataToObject(data,void 0);const o=St(JSON.stringify(data),r(this,fo)[fo]);let l=r(this,po)[po].dataPostURL;l=kt(l,"type",Z),l=kt(l,"d",o),l=kt(l,U,t?"true":"false"),r(this,uo)[uo].saveAndFireRequest(l,Ne.blockRequest),e.splice(0,e.length)}}},yo=n("oldValues"),wo=n("logger"),Co=n("request"),ko=n("account"),xo=n("wizAlertJSPath"),Po=n("fcmPublicKey"),So=n("setUpWebPush"),Io=n("setUpWebPushNotifications"),Oo=n("setApplicationServerKey"),_o=n("setUpSafariNotifications"),Eo=n("setUpChromeFirefoxNotifications"),Lo=n("addWizAlertJS"),Ao=n("removeWizAlertJS"),Mo=n("handleNotificationRegistration");class To extends Array{constructor(e,t){let{logger:o,session:n,request:l,account:c}=e;super(),Object.defineProperty(this,Mo,{value:Uo}),Object.defineProperty(this,Ao,{value:Fo}),Object.defineProperty(this,Lo,{value:zo}),Object.defineProperty(this,Eo,{value:No}),Object.defineProperty(this,_o,{value:Bo}),Object.defineProperty(this,Oo,{value:Do}),Object.defineProperty(this,Io,{value:jo}),Object.defineProperty(this,So,{value:Ro}),Object.defineProperty(this,yo,{writable:!0,value:void 0}),Object.defineProperty(this,wo,{writable:!0,value:void 0}),Object.defineProperty(this,Co,{writable:!0,value:void 0}),Object.defineProperty(this,ko,{writable:!0,value:void 0}),Object.defineProperty(this,xo,{writable:!0,value:void 0}),Object.defineProperty(this,Po,{writable:!0,value:void 0}),r(this,xo)[xo]="https://d2r1yp2w7bby2u.cloudfront.net/js/wzrk_dialog.min.js",r(this,Po)[Po]=null,r(this,yo)[yo]=t,r(this,wo)[wo]=o,r(this,Co)[Co]=l,r(this,ko)[ko]=c}push(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(this,So)[So](t),0}_processOldValues(){r(this,yo)[yo]&&r(this,So)[So](r(this,yo)[yo]),r(this,yo)[yo]=null}_enableWebPush(e,t){Ne.webPushEnabled=e,null!=t&&r(this,Oo)[Oo](t),Ne.webPushEnabled&&Ne.notifApi.notifEnabledFromApi?r(this,Mo)[Mo](Ne.notifApi.displayArgs):!Ne.webPushEnabled&&Ne.notifApi.notifEnabledFromApi&&r(this,wo)[wo].error("Ensure that web push notifications are fully enabled and integrated before requesting them")}}var Ro=function(e){Ne.webPushEnabled&&e.length>0?r(this,Mo)[Mo](e):null==Ne.webPushEnabled&&e.length>0?(Ne.notifApi.notifEnabledFromApi=!0,Ne.notifApi.displayArgs=e.slice()):!1===Ne.webPushEnabled&&e.length>0&&r(this,wo)[wo].error("Make sure push notifications are fully enabled and integrated")},jo=function(e,t,o,n){-1!==navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Firefox")?r(this,Eo)[Eo](e,t):-1!==navigator.userAgent.indexOf("Safari")&&r(this,_o)[_o](e,o,n)},Do=function(e){r(this,Po)[Po]=e},Bo=function(e,t,o){void 0===t&&r(this,wo)[wo].error("Ensure that APNS Web Push ID is supplied"),void 0===o&&r(this,wo)[wo].error("Ensure that APNS Web Push service path is supplied"),"safari"in window&&"pushNotification"in window.safari&&window.safari.pushNotification.requestPermission(o,t,{},(e=>{if("granted"===e.permission){const t=JSON.parse(JSON.stringify(e));t.endpoint=e.deviceToken,t.browser="Safari",Be.saveToLSorCookie(le,t),r(this,Co)[Co].registerToken(t),r(this,wo)[wo].info("Safari Web Push registered. Device Token: "+e.deviceToken)}else"denied"===e.permission&&r(this,wo)[wo].info("Error subscribing to Safari web push")}))},No=function(e,t){let o="";"serviceWorker"in navigator&&navigator.serviceWorker.register(t).then((e=>"undefined"!=typeof __wzrk_account_id?new Promise((t=>setTimeout((()=>t(e)),5e3))):(o=e.scope,/^(\.?)(\/?)([^/]*).js$/.test(t)?navigator.serviceWorker.ready:-1!==navigator.userAgent.indexOf("Chrome")?new Promise((t=>setTimeout((()=>t(e)),5e3))):navigator.serviceWorker.getRegistrations()))).then((t=>{-1!==navigator.userAgent.indexOf("Firefox")&&Array.isArray(t)&&(t=t.filter((i=>i.scope===o))[0]);const n={userVisibleOnly:!0};null!=r(this,Po)[Po]&&(n.applicationServerKey=Pt(r(this,Po)[Po])),t.pushManager.subscribe(n).then((t=>{r(this,wo)[wo].info("Service Worker registered. Endpoint: "+t.endpoint);const o=JSON.parse(JSON.stringify(t));-1!==navigator.userAgent.indexOf("Chrome")?(o.endpoint=o.endpoint.split("/").pop(),o.browser="Chrome"):-1!==navigator.userAgent.indexOf("Firefox")&&(o.endpoint=o.endpoint.split("/").pop(),o.browser="Firefox"),Be.saveToLSorCookie(le,o),r(this,Co)[Co].registerToken(o),void 0!==e&&"function"==typeof e&&e()})).catch((e=>{r(this,wo)[wo].error("Error subscribing: "+e),t.pushManager.getSubscription().then((e=>{null!==e&&e.unsubscribe().then((e=>{r(this,wo)[wo].info("Unsubscription successful")})).catch((e=>{r(this,wo)[wo].error("Error unsubscribing: "+e)}))}))}))})).catch((e=>{r(this,wo)[wo].error("error registering service worker: "+e)}))},zo=function(){const e=document.createElement("script");return e.setAttribute("type","text/javascript"),e.setAttribute("id","wzrk-alert-js"),e.setAttribute("src",r(this,xo)[xo]),document.getElementsByTagName("body")[0].appendChild(e),e},Fo=function(){const e=document.getElementById("wzrk-alert-js");e.parentNode.removeChild(e)},Uo=function(e){let t,o,n,l,c,d,h,f,v,m,y,w,C,k,x;if(1===e.length){if(Pe(e[0])){const r=e[0];t=r.titleText,o=r.bodyText,n=r.okButtonText,l=r.rejectButtonText,c=r.okButtonColor,d=r.skipDialog,h=r.askAgainTimeInSeconds,f=r.okCallback,v=r.rejectCallback,m=r.subscriptionCallback,y=r.serviceWorkerPath,w=r.httpsPopupPath,C=r.httpsIframePath,k=r.apnsWebPushId,x=r.apnsWebPushServiceUrl}}else t=e[0],o=e[1],n=e[2],l=e[3],c=e[4],d=e[5],h=e[6];if(null==d&&(d=!1),null==y&&(y="/clevertap_sw.js"),void 0===navigator.serviceWorker)return;const P=null!=w&&null!=C;if("https:"!==window.location.protocol&&"localhost"!==document.location.hostname&&!P)return void r(this,wo)[wo].error("Make sure you are https or localhost to register for notifications");if(-1!==navigator.userAgent.indexOf("Chrome")){const e=navigator.userAgent.match(/Chrome\/(\d+)/);if(null==e||parseInt(e[1],10)<50)return}else if(-1!==navigator.userAgent.indexOf("Firefox")){const e=navigator.userAgent.match(/Firefox\/(\d+)/);if(null==e||parseInt(e[1],10)<50)return}else{if(-1===navigator.userAgent.indexOf("Safari"))return;{const e=navigator.userAgent.match(/Safari\/(\d+)/);if(null==e||parseInt(e[1],10)<50)return}}if(!P){if(null==Notification)return;if("granted"===Notification.permission)return void r(this,Io)[Io](m,y,k,x);if("denied"===Notification.permission)return;if(d)return void r(this,Io)[Io](m,y,k,x)}if(!(t&&o&&n&&l))return void r(this,wo)[wo].error("Missing input parameters; please specify title, body, ok button and cancel button text");null!=c&&c.match(/^#[a-f\d]{6}$/i)||(c="#f28046");const S=(new Date).getTime()/1e3;if(null==Be.getMetaProp("notif_last_time"))Be.setMetaProp("notif_last_time",S);else{if(null==h&&(h=604800),S-Be.getMetaProp("notif_last_time")<h)return;Be.setMetaProp("notif_last_time",S)}if(P){const e=document.createElement("iframe");e.setAttribute("style","display:none;"),e.setAttribute("src",C),document.body.appendChild(e),window.addEventListener("message",(e=>{if(null!=e.data){let d={};try{d=JSON.parse(e.data)}catch(e){return}null!=d.state&&"ct"===d.from&&"not"===d.state&&(r(this,Lo)[Lo]().onload=()=>{window.wzrkPermissionPopup.wizAlert({title:t,body:o,confirmButtonText:n,confirmButtonColor:c,rejectButtonText:l},(e=>{e?("function"==typeof f&&f(),window.open(w)):"function"==typeof v&&v(),r(this,Ao)[Ao]()}))})}}),!1)}else r(this,Lo)[Lo]().onload=()=>{window.wzrkPermissionPopup.wizAlert({title:t,body:o,confirmButtonText:n,confirmButtonColor:c,rejectButtonText:l},(e=>{e?("function"==typeof f&&f(),r(this,Io)[Io](m,y,k,x)):"function"==typeof v&&v(),r(this,Ao)[Ao]()}))}},qo=n("variableStore");class Vo{constructor(e){let{variableStore:t}=e;Object.defineProperty(this,qo,{writable:!0,value:void 0}),this.name=null,this.defaultValue=null,this.value=null,this.type=null,this.hadStarted=!1,this.valueChangedCallbacks=[],r(this,qo)[qo]=t}getValue(){return this.value}getdefaultValue(){return this.defaultValue}static define(e,t,o){if(!e||"string"!=typeof e)return console.error("Empty or invalid name parameter provided."),null;if(e.startsWith(".")||e.endsWith("."))return console.error("Variable name starts or ends with a `.` which is not allowed: "+e),null;const n=typeof t;if("string"!==n&&"number"!==n&&"boolean"!==n)return console.error("Only primitive types (string, number, boolean) are accepted as value"),null;const r=o.getVariable(e);if(r)return r;const l=new Vo({variableStore:o});try{l.name=e,l.defaultValue=t,l.value=t,l.type=n,o.registerVariable(l),l.update(t)}catch(e){console.error(e)}return l}update(e){const t=this.value;this.value=e,null===e&&null===t||null!==e&&e===t&&this.hadStarted||r(this,qo)[qo].hasVarsRequestCompleted()&&(this.hadStarted=!0,this.triggerValueChanged())}triggerValueChanged(){this.valueChangedCallbacks.forEach((e=>{e(this)}))}addValueChangedCallback(e){e?(this.valueChangedCallbacks.push(e),r(this,qo)[qo].hasVarsRequestCompleted()&&e(this)):console.log("Invalid callback parameter provided.")}removeValueChangedCallback(e){const t=this.valueChangedCallbacks.indexOf(e);-1!==t&&this.valueChangedCallbacks.splice(t,1)}clearStartFlag(){this.hadStarted=!1}}var Wo=n("logger"),Go=n("account"),Ho=n("request"),Ko=n("event"),Jo=n("variables"),Zo=n("remoteVariables"),$o=n("fetchCallback"),Yo=n("variablesChangedCallbacks"),Qo=n("oneTimeVariablesChangedCallbacks"),Xo=n("hasVarsRequestCompleted"),en=n("runVariablesChangedCallback");class tn{constructor(e){let{logger:t,request:o,account:n,event:l}=e;Object.defineProperty(this,en,{value:on}),Object.defineProperty(this,Wo,{writable:!0,value:void 0}),Object.defineProperty(this,Go,{writable:!0,value:void 0}),Object.defineProperty(this,Ho,{writable:!0,value:void 0}),Object.defineProperty(this,Ko,{writable:!0,value:void 0}),Object.defineProperty(this,Jo,{writable:!0,value:void 0}),Object.defineProperty(this,Zo,{writable:!0,value:void 0}),Object.defineProperty(this,$o,{writable:!0,value:void 0}),Object.defineProperty(this,Yo,{writable:!0,value:void 0}),Object.defineProperty(this,Qo,{writable:!0,value:void 0}),Object.defineProperty(this,Xo,{writable:!0,value:!1}),r(this,Wo)[Wo]=t,r(this,Go)[Go]=n,r(this,Ho)[Ho]=o,r(this,Ko)[Ko]=l,r(this,Jo)[Jo]={},r(this,Zo)[Zo]={},r(this,Yo)[Yo]=[],r(this,Qo)[Qo]=[],Ne.variableStore=this}registerVariable(e){const{name:t}=e;r(this,Jo)[Jo][t]=e,console.log("registerVariable",r(this,Jo)[Jo])}getVariable(e){return r(this,Jo)[Jo][e]}hasVarsRequestCompleted(){return r(this,Xo)[Xo]}async syncVariables(e,t){if(!r(this,Go)[Go].token)throw new Error("Account token is missing");const o={type:"varsPayload",vars:{}};for(const e in r(this,Jo)[Jo])o.vars[e]={defaultValue:r(this,Jo)[Jo][e].defaultValue,type:r(this,Jo)[Jo][e].type};if(0===Object.keys(o.vars).length)return void r(this,Wo)[Wo].error("No variables are defined.");let meta={};meta=r(this,Ho)[Ho].addSystemDataToObject(meta,void 0),meta.tk=r(this,Go)[Go].token,meta.type="meta";const body=JSON.stringify([meta,o]),n=r(this,Go)[Go].dataPostPEURL;try{const t=await r(this,Ho)[Ho].post(n,body);return e&&"function"==typeof e&&e(t),t}catch(e){t&&"function"==typeof t&&t(e),400===e.status?r(this,Wo)[Wo].error("Invalid sync payload or clear the existing draft"):401===e.status?r(this,Wo)[Wo].error("This is not a test profile"):r(this,Wo)[Wo].error("Sync variable failed")}}async fetchVariables(e){r(this,Ko)[Ko].push(Ce,{t:4}),e&&"function"==typeof e&&(r(this,$o)[$o]=e)}mergeVariables(e){console.log("msg vars is ",e),r(this,Xo)[Xo]=!0,Be.saveToLSorCookie(me,e),r(this,Zo)[Zo]=e;for(const t in r(this,Jo)[Jo])e.hasOwnProperty(t)&&r(this,Jo)[Jo][t].update(e[t]);r(this,$o)[$o]&&r(this,$o)[$o](),r(this,en)[en]()}addVariablesChangedCallback(e){e&&"function"==typeof e?(r(this,Yo)[Yo].push(e),this.hasVarsRequestCompleted()&&e()):r(this,Wo)[Wo].error("callback is not a function")}addOneTimeVariablesChangedCallback(e){e&&"function"==typeof e&&(this.hasVarsRequestCompleted()?e():r(this,Qo)[Qo].push(e))}removeVariablesChangedCallback(e){const t=r(this,Yo)[Yo].indexOf(e);-1!==t&&r(this,Yo)[Yo].splice(t,1)}removeOneTimeVariablesChangedCallback(e){const t=r(this,Qo)[Qo].indexOf(e);-1!==t&&r(this,Qo)[Qo].splice(t,1)}}var on=function(){for(var e of r(this,Yo)[Yo])e();for(var t of r(this,Qo)[Qo])t();r(this,Qo)[Qo].length=0},nn=n("logger"),rn=n("api"),sn=n("onloadcalled"),an=n("device"),ln=n("session"),cn=n("account"),dn=n("request"),hn=n("variableStore"),un=n("isSpa"),pn=n("previousUrl"),gn=n("boundCheckPageChanged"),fn=n("dismissSpamControl"),vn=n("processOldValues"),bn=n("debounce"),mn=n("checkPageChanged"),yn=n("pingRequest"),wn=n("isPingContinuous"),Cn=n("overrideDSyncFlag");class kn{get spa(){return r(this,un)[un]}set spa(e){const t=!0===e;r(this,un)[un]!==t&&1===r(this,sn)[sn]&&(t?document.addEventListener("click",r(this,gn)[gn]):document.removeEventListener("click",r(this,gn)[gn])),r(this,un)[un]=t}get dismissSpamControl(){return r(this,fn)[fn]}set dismissSpamControl(e){const t=!0===e;r(this,fn)[fn]=t,Ne.dismissSpamControl=t}constructor(){var e,t,o,n,l;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,Cn,{value:_n}),Object.defineProperty(this,wn,{value:On}),Object.defineProperty(this,yn,{value:In}),Object.defineProperty(this,mn,{value:Sn}),Object.defineProperty(this,bn,{value:Pn}),Object.defineProperty(this,vn,{value:xn}),Object.defineProperty(this,nn,{writable:!0,value:void 0}),Object.defineProperty(this,rn,{writable:!0,value:void 0}),Object.defineProperty(this,sn,{writable:!0,value:void 0}),Object.defineProperty(this,an,{writable:!0,value:void 0}),Object.defineProperty(this,ln,{writable:!0,value:void 0}),Object.defineProperty(this,cn,{writable:!0,value:void 0}),Object.defineProperty(this,dn,{writable:!0,value:void 0}),Object.defineProperty(this,hn,{writable:!0,value:void 0}),Object.defineProperty(this,un,{writable:!0,value:void 0}),Object.defineProperty(this,pn,{writable:!0,value:void 0}),Object.defineProperty(this,gn,{writable:!0,value:r(this,mn)[mn].bind(this)}),Object.defineProperty(this,fn,{writable:!0,value:void 0}),this.enablePersonalization=void 0,this.popupCallbacks={},this.popupCurrentWzrkId="",r(this,sn)[sn]=0,this._isPersonalisationActive=this._isPersonalisationActive.bind(this),this.raiseNotificationClicked=()=>{},r(this,nn)[nn]=new Ki(Vi.INFO),r(this,cn)[cn]=new w(null===(e=c.account)||void 0===e?void 0:e[0],c.region||(null===(t=c.account)||void 0===t?void 0:t[1]),c.targetDomain||(null===(o=c.account)||void 0===o?void 0:o[2]),c.token||(null===(n=c.account)||void 0===n?void 0:n[3])),r(this,an)[an]=new Ze({logger:r(this,nn)[nn]}),r(this,fn)[fn]=c.dismissSpamControl||!1,r(this,ln)[ln]=new Xi({logger:r(this,nn)[nn],isPersonalisationActive:this._isPersonalisationActive}),r(this,dn)[dn]=new co({logger:r(this,nn)[nn],account:r(this,cn)[cn],device:r(this,an)[an],session:r(this,ln)[ln],isPersonalisationActive:this._isPersonalisationActive}),this.enablePersonalization=c.enablePersonalization||!1,this.event=new mt({logger:r(this,nn)[nn],request:r(this,dn)[dn],isPersonalisationActive:this._isPersonalisationActive},c.event),this.profile=new ii({logger:r(this,nn)[nn],request:r(this,dn)[dn],account:r(this,cn)[cn],isPersonalisationActive:this._isPersonalisationActive},c.profile),this.onUserLogin=new fi({request:r(this,dn)[dn],account:r(this,cn)[cn],session:r(this,ln)[ln],logger:r(this,nn)[nn],device:r(this,an)[an]},c.onUserLogin),this.privacy=new bo({request:r(this,dn)[dn],account:r(this,cn)[cn],logger:r(this,nn)[nn]},c.privacy),this.notifications=new To({logger:r(this,nn)[nn],request:r(this,dn)[dn],account:r(this,cn)[cn]},c.notifications),r(this,hn)[hn]=new tn({logger:r(this,nn)[nn],request:r(this,dn)[dn],account:r(this,cn)[cn],event:this.event}),r(this,rn)[rn]=new Ke({logger:r(this,nn)[nn],request:r(this,dn)[dn],device:r(this,an)[an],session:r(this,ln)[ln]}),this.spa=c.spa,this.dismissSpamControl=c.dismissSpamControl,this.user=new qi({isPersonalisationActive:this._isPersonalisationActive}),this.session={getTimeElapsed:()=>r(this,ln)[ln].getTimeElapsed(),getPageCount:()=>r(this,ln)[ln].getPageCount()},this.logout=()=>{r(this,nn)[nn].debug("logout called"),Be.setInstantDeleteFlagInK()},this.clear=()=>{this.onUserLogin.clear()},this.getCleverTapID=()=>r(this,an)[an].getGuid(),this.getAccountID=()=>r(this,cn)[cn].id,this.getSCDomain=()=>r(this,cn)[cn].finalTargetDomain,this.setLibrary=(e,t)=>{Ne.flutterVersion={[e]:t}},this.setSCSDKVersion=e=>{r(this,cn)[cn].scSDKVersion=e;const data={};data.af={scv:"sc-sdk-v"+r(this,cn)[cn].scSDKVersion};let t=r(this,cn)[cn].dataPostURL;t=kt(t,"type","page"),t=kt(t,"d",St(JSON.stringify(data),r(this,nn)[nn])),r(this,dn)[dn].saveAndFireRequest(t,Ne.blockRequest)},Bi()&&(Ri(),Ti(r(this,nn)[nn])),this.getInboxMessageCount=()=>{const e=Ai();return Object.keys(e).length},this.getInboxMessageUnreadCount=()=>{if(Ne.inbox)return Ne.inbox.unviewedCounter;r(this,nn)[nn].debug("No unread messages")},this.getAllInboxMessages=()=>Ai(),this.getUnreadInboxMessages=()=>{if(Ne.inbox)return Ne.inbox.unviewedMessages;r(this,nn)[nn].debug("No unread messages")},this.getInboxMessageForId=e=>{const t=Ai();if((null!==e||""!==e)&&t.hasOwnProperty(e))return t[e];r(this,nn)[nn].error("No message available for message Id "+e)},this.deleteInboxMessage=e=>{const t=Ai();if(null===e&&""===e||!t.hasOwnProperty(e))r(this,nn)[nn].error("No message available for message Id "+e);else{const o=document.querySelector("ct-web-inbox").shadowRoot.getElementById(e);0===t[e].viewed&&(Ne.inbox.unviewedCounter--,delete Ne.inbox.unviewedMessages[e],document.getElementById("unviewedBadge").innerText=Ne.inbox.unviewedCounter,document.getElementById("unviewedBadge").style.display=Ne.inbox.unviewedCounter>0?"flex":"none"),o&&o.remove(),delete t[e],Mi(t)}},this.markReadInboxMessage=e=>{const t=Ne.inbox.unviewedMessages,o=Ai();if(null===e&&""===e||!t.hasOwnProperty(e))r(this,nn)[nn].error("No message available for message Id "+e);else{const t=document.querySelector("ct-web-inbox").shadowRoot.getElementById(e);if(null!==t&&(t.shadowRoot.getElementById("unreadMarker").style.display="none"),o[e].viewed=1,document.getElementById("unviewedBadge")){var n=parseInt(document.getElementById("unviewedBadge").innerText)-1;document.getElementById("unviewedBadge").innerText=n,document.getElementById("unviewedBadge").style.display=n>0?"flex":"none"}window.clevertap.renderNotificationViewed({msgId:o[e].wzrk_id,pivotId:o[e].pivotId}),Ne.inbox.unviewedCounter--,delete Ne.inbox.unviewedMessages[e],Mi(o)}},this.markReadInboxMessagesForIds=e=>{if(Array.isArray(e))for(var t=0;t<e.length;t++)this.markReadInboxMessage(e[t])},this.markReadAllInboxMessage=()=>{const e=Ne.inbox.unviewedMessages,t=Ai();Object.keys(e).length>0?(Object.keys(e).forEach((e=>{const o=document.querySelector("ct-web-inbox").shadowRoot.getElementById(e);null!==o&&(o.shadowRoot.getElementById("unreadMarker").style.display="none"),t[e].viewed=1,window.clevertap.renderNotificationViewed({msgId:t[e].wzrk_id,pivotId:t[e].wzrk_pivot})})),document.getElementById("unviewedBadge").innerText=0,document.getElementById("unviewedBadge").style.display="none",Mi(t),Ne.inbox.unviewedCounter=0,Ne.inbox.unviewedMessages={}):r(this,nn)[nn].debug("All messages are already read")},this.toggleInbox=e=>{var t;return null===(t=Ne.inbox)||void 0===t?void 0:t.toggleInbox(e)},this.renderNotificationViewed=e=>{d(re,e)},this.renderNotificationClicked=e=>{d(se,e)};const d=(e,t)=>{if(!t||!t.msgId)return;const data={type:"event"};if(data.evtName=e,data.evtData={[ne]:t.msgId},t.pivotId&&(data.evtData={...data.evtData,wzrk_pivot:t.pivotId}),t.wzrk_slideNo&&(data.evtData={...data.evtData,wzrk_slideNo:t.wzrk_slideNo}),t.kv&&null!==t.kv&&void 0!==t.kv)for(const e in t.kv)e.startsWith(oe)&&(data.evtData={...data.evtData,[e]:t.kv[e]});if(t.msgCTkv&&null!==t.msgCTkv&&void 0!==t.msgCTkv)for(const e in t.msgCTkv)e.startsWith(oe)&&(data.evtData={...data.evtData,[e]:t.msgCTkv[e]});r(this,dn)[dn].processEvent(data)};this.setLogLevel=e=>{r(this,nn)[nn].logLevel=Number(e),3===e?sessionStorage.WZRK_D="":delete sessionStorage.WZRK_D},this.handleIncrementValue=(e,t)=>{this.profile._handleIncrementDecrementValue(e,t,ce)},this.handleDecrementValue=(e,t)=>{this.profile._handleIncrementDecrementValue(e,t,de)},this.setMultiValuesForKey=(e,t)=>{Array.isArray(t)?this.profile._handleMultiValueSet(e,t,he):console.error("setMultiValuesForKey should be called with a value of type array")},this.addMultiValueForKey=(e,t)=>{"string"==typeof t||"number"==typeof t?this.profile._handleMultiValueAdd(e,t,ue):console.error("addMultiValueForKey should be called with a value of type string or number.")},this.addMultiValuesForKey=(e,t)=>{Array.isArray(t)?this.profile._handleMultiValueAdd(e,t,ue):console.error("addMultiValuesForKey should be called with a value of type array.")},this.removeMultiValueForKey=(e,t)=>{"string"==typeof t||"number"==typeof t?this.profile._handleMultiValueRemove(e,t,pe):console.error("removeMultiValueForKey should be called with a value of type string or number.")},this.removeMultiValuesForKey=(e,t)=>{Array.isArray(t)?this.profile._handleMultiValueRemove(e,t,pe):console.error("removeMultiValuesForKey should be called with a value of type array.")},this.removeValueForKey=e=>{this.profile._handleMultiValueDelete(e,ge)};const h=(e,t,o)=>{Zt(e,t,o,r(this,cn)[cn],r(this,nn)[nn])};function f(e){var t=e.coords.latitude,o=e.coords.longitude;Ne.location={Latitude:t,Longitude:o},this.sendLocationData({Latitude:t,Longitude:o})}function v(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case e.TIMEOUT:console.log("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred.")}}this.getLocation=function(e,t){if(e&&"number"!=typeof e||t&&"number"!=typeof t)console.log("Latitude and Longitude must be of number type");else if(e&&t){if(e<=-90||e>90)return void console.log("A vaid latitude must range between -90 and 90");if(t<=-180||t>180)return void console.log("A valid longitude must range between -180 and 180");Ne.location={Latitude:e,Longitude:t},this.sendLocationData({Latitude:e,Longitude:t})}else navigator.geolocation?navigator.geolocation.getCurrentPosition(f.bind(this),v):console.log("Geolocation is not supported by this browser.")};const m=r(this,rn)[rn];m.logout=this.logout,m.clear=this.clear,m.closeIframe=(e,t)=>{Ht(e,t,r(this,ln)[ln].sessionId)},m.enableWebPush=(e,t)=>{this.notifications._enableWebPush(e,t)},m.tr=e=>{Fi(e,{device:r(this,an)[an],session:r(this,ln)[ln],request:r(this,dn)[dn],logger:r(this,nn)[nn]})},m.setEnum=e=>{Jt(e,r(this,nn)[nn])},m.is_onloadcalled=()=>1===r(this,sn)[sn],m.subEmail=e=>{h("1",e)},m.getEmail=(e,t)=>{h("-1",e,t)},m.unSubEmail=e=>{h("0",e)},m.unsubEmailGroups=e=>{Ne.unsubGroups=[];const t=document.getElementsByClassName("ct-unsub-group-input-item");for(let i=0;i<t.length;i++){const element=t[i];if(element.name){const data={name:element.name,isUnsubscribed:element.checked};Ne.unsubGroups.push(data)}}h(te,e)},m.setSubscriptionGroups=e=>{Ne.unsubGroups=e},m.getSubscriptionGroups=()=>Ne.unsubGroups,m.changeSubscriptionGroups=(e,t)=>{m.setSubscriptionGroups(t),h(te,e)},m.isGlobalUnsubscribe=()=>Ne.globalUnsubscribe,m.setIsGlobalUnsubscribe=e=>{Ne.globalUnsubscribe=e},m.setUpdatedCategoryLong=e=>{e[ie]&&(Ne.updatedCategoryLong=e[ie])},window.$CLTP_WR=window.$WZRK_WR=m,(null===(l=c.account)||void 0===l?void 0:l[0].id)&&this.init()}init(e,t,o,n){if(1===r(this,sn)[sn])return;if(Be.removeCookie("WZRK_P",window.location.hostname),!r(this,cn)[cn].id){if(!e)return void r(this,nn)[nn].error(Qe);r(this,cn)[cn].id=e}r(this,ln)[ln].cookieName=A+"_"+r(this,cn)[cn].id,t&&(r(this,cn)[cn].region=t),o&&(r(this,cn)[cn].targetDomain=o),n&&(r(this,cn)[cn].token=n);const l=location.href,c=wt(l.toLowerCase());if(void 0!==c.e&&"0"==c.wzrk_ex)return;Ne.isPrivacyArrPushed=!0,Ne.privacyArray.length>0&&this.privacy.push(Ne.privacyArray),r(this,vn)[vn](),this.pageChanged();const d=setInterval((()=>{r(this,an)[an].gcookie&&(clearInterval(d),r(this,dn)[dn].processBackupEvents())}),3e3);r(this,un)[un]?document.addEventListener("click",r(this,gn)[gn]):document.removeEventListener("click",r(this,gn)[gn]),r(this,sn)[sn]=1}pageChanged(){const e=window.location.href,t=wt(e.toLowerCase()),o=r(this,ln)[ln].getSessionCookieObject();let n=void 0===o.p?0:o.p;o.p=++n,r(this,ln)[ln].setSessionCookieObject(o);let data={},l=Ct(document.referrer);if(window.location.hostname!==l){const e=120;""!==l&&(l=l.length>e?l.substring(0,e):l,data.referrer=l);let o=t.utm_source||t.wzrk_source;void 0!==o&&(o=o.length>e?o.substring(0,e):o,data.us=o);let n=t.utm_medium||t.wzrk_medium;void 0!==n&&(n=n.length>e?n.substring(0,e):n,data.um=n);let r=t.utm_campaign||t.wzrk_campaign;if(void 0!==r&&(r=r.length>e?r.substring(0,e):r,data.uc=r),void 0!==t.wzrk_medium){const e=t.wzrk_medium;e.match(/^email$|^social$|^search$/)&&(data.wm=e)}}data=r(this,dn)[dn].addSystemDataToObject(data,void 0),data.cpg=e,data[E]=Ut();let c=r(this,cn)[cn].dataPostURL;r(this,dn)[dn].addFlags(data),1===parseInt(data.pg)&&r(this,Cn)[Cn](data),c=kt(c,"type","page"),c=kt(c,"d",St(JSON.stringify(data),r(this,nn)[nn])),r(this,dn)[dn].saveAndFireRequest(c,Ne.blockRequest),1===parseInt(data.pg)&&this.event.push(Ce,{t:4}),r(this,pn)[pn]=e,setTimeout((()=>{n<=3&&r(this,yn)[yn](),r(this,wn)[wn]()&&setInterval((()=>{r(this,yn)[yn]()}),ee)}),X)}_isPersonalisationActive(){return Be._isLocalStorageSupported()&&this.enablePersonalization}set popupCallback(e){this.popupCallbacks[this.popupCurrentWzrkId]=e}sendLocationData(e){let data={af:{}};const t={};data.type="profile",null==t.tz&&(t.tz=(new Date).toString().match(/([A-Z]+[\+-][0-9]+)/)[1]),data.profile=t,e&&Object.keys(e).forEach((t=>{data.af[t]=e[t]})),Ne.location&&(data.af={...data.af,...Ne.location}),data=r(this,dn)[dn].addSystemDataToObject(data,void 0),r(this,dn)[dn].addFlags(data);const o=St(JSON.stringify(data),r(this,nn)[nn]);let n=r(this,cn)[cn].dataPostURL;n=kt(n,"type",Z),n=kt(n,"d",o),r(this,dn)[dn].saveAndFireRequest(n,Ne.blockRequest)}setOffline(e){"boolean"==typeof e?(Ne.offline=e,e||r(this,dn)[dn].processBackupEvents()):console.error("setOffline should be called with a value of type boolean")}defineVariable(e,t){return Vo.define(e,t,r(this,hn)[hn])}async syncVariables(e,t){if(4===r(this,nn)[nn].logLevel)return r(this,hn)[hn].syncVariables(e,t);r(this,nn)[nn].error("App log level is not set to 4")}async fetchVariables(e){return r(this,hn)[hn].fetchVariables(e)}addVariablesChangedCallback(e){r(this,hn)[hn].addVariablesChangedCallback(e)}addOneTimeVariablesChangedCallback(e){r(this,hn)[hn].addOneTimeVariablesChangedCallback(e)}}var xn=function(){this.onUserLogin._processOldValues(),this.privacy._processOldValues(),this.event._processOldValues(),this.profile._processOldValues(),this.notifications._processOldValues()},Pn=function(e){let t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){clearTimeout(t),t=setTimeout(e,o)}},Sn=function(){r(this,bn)[bn]((()=>{r(this,pn)[pn]!==location.href&&this.pageChanged()}))()},In=function(){let e=r(this,cn)[cn].dataPostURL,data={};data=r(this,dn)[dn].addSystemDataToObject(data,void 0),e=kt(e,"type",$),e=kt(e,"d",St(JSON.stringify(data),r(this,nn)[nn])),r(this,dn)[dn].saveAndFireRequest(e,Ne.blockRequest)},On=function(){return void 0!==window.wzrk_d&&"continuous"===window.wzrk_d.ping},_n=function(data){this._isPersonalisationActive()&&(data.dsync=!0)};const En=new kn(window.clevertap);return window.clevertap=window.wizrocket=En,En}()}}]);